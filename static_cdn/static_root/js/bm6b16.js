var $bm=function(){var nativeEvents=["change","click","mouseover","mouseout","keydown","load","keyup","mousemove","touchmove","scroll","ontouchstart","focusout"],customEvents=[],loadedJSLists=[],loadedCSSLists=[];var cancelxmlHttp=new XMLHttpRequest;var Constructor=function(selector){if(selector==="document"){this.elems=[document]}else if(selector==="window"){this.elems=[window]}else{this.elems=document.querySelectorAll(selector)}};var instantiate=function(selector){return new Constructor(selector)};Constructor.prototype.each=function(callback){if(!callback||typeof callback!=="function")return;for(var i=0;i<this.elems.length;i++){callback(this.elems[i],i)}return this};Constructor.prototype.postAjax=function(url,data,success,content_type){var content_type=typeof content_type!="undefined"?content_type:"application/x-www-form-urlencoded";var params=typeof data!="object"?data:Object.keys(data).map(function(k){return encodeURIComponent(k)+"="+encodeURIComponent(data[k])}).join("&");if(content_type=="application/json;charset=UTF-8"){params=JSON.stringify(data)}var xhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xhr.open("POST",url);xhr.onreadystatechange=function(){if(xhr.readyState>3&&xhr.status==200){success(xhr.responseText)}};xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("Content-Type",content_type);xhr.send(params);return xhr};Constructor.prototype.addListener=function(type,func){type=type=="touchmove"&&!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)?"scroll":type;if(nativeEvents.indexOf(type)>-1){this.each(function(item){item.addEventListener(type,func,false)})}return this};Constructor.prototype.removeListener=function(type,func){if(nativeEvents.indexOf(type)>-1){this.each(function(item){item.removeEventListener(type,func,false)})}return this};Constructor.prototype.get=function(url,callback){return httpGetAsync(url,callback);function httpGetAsync(url,callback){var xmlHttp=new XMLHttpRequest;xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4&&xmlHttp.status==200)callback(xmlHttp.responseText)};xmlHttp.open("GET",url,true);xmlHttp.send(null)}};Constructor.prototype.cancellerableget=function(url,callback){return httpGetAsync(url,callback);function httpGetAsync(url,callback){if(cancelxmlHttp&&cancelxmlHttp.readystate!=4){cancelxmlHttp.abort()}cancelxmlHttp.onreadystatechange=function(){if(cancelxmlHttp.readyState==4&&cancelxmlHttp.status==200)callback(cancelxmlHttp.responseText)};cancelxmlHttp.open("GET",url,true);cancelxmlHttp.send(null)}};Constructor.prototype.injectDOM=function(){try{var attribute=arguments[0];var dom=arguments[1];var type=!!arguments[2]?arguments[2]:"replace";var domView=document.querySelector(attribute);if(domView){type=="append"?domView.innerHTML+=domView?dom:"":domView.innerHTML=domView?dom:""}}catch(e){throw e}return this};Constructor.prototype.getInjectDOM=function(){try{var self=this;var url=arguments[0];var attribute=arguments[1];var domtype=arguments[2]||null;var callback=arguments[3]||undefined;var canceller=arguments[4]||false;canceller?this.cancellerableget(url,function(res){self.injectDOM(attribute,res,domtype);!!callback&&callback(res)}):this.get(url,function(res){self.injectDOM(attribute,res,domtype);!!callback&&callback(res)})}catch(e){throw e}};Constructor.prototype.loadJS=function(){var source=arguments[0];var callback=arguments[1];var rePull=arguments[2]||false;try{if(loadedJSLists.indexOf(source)>-1&&!rePull)return callback();var script=document.createElement("script");var prior=document.getElementsByTagName("script")[0];script.async=1;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;script=undefined;if(!isAbort&&callback){loadedJSLists.push(source);setTimeout(callback,0)}}};script.src=source;prior.parentNode.insertBefore(script,prior)}catch(e){throw e}};Constructor.prototype.loadCSS=function(path,callback){try{if(loadedCSSLists.indexOf(path)>-1)return callback();var head=document.getElementsByTagName("head")[0],link=document.createElement("link");link.setAttribute("href",path);link.setAttribute("rel","stylesheet");link.setAttribute("type","text/css");var sheet,cssRules;if("sheet"in link){sheet="sheet";cssRules="cssRules"}else{sheet="styleSheet";cssRules="rules"}head.appendChild(link);loadedCSSLists.push(path);callback()}catch(e){throw e}};Constructor.prototype.getInputValue=function(){var values=[];this.each(function(item){values.push(item.value)});return values};Constructor.prototype.removeClass=function(str){this.each(function(item){str?item.classList.remove(str):item.className=""})};Constructor.prototype.addClass=function(str){this.each(function(item){item.classList.add(str)})};Constructor.prototype.toggleClass=function(str){this.each(function(item){item.classList.toggle(str)})};Constructor.prototype.removeDOM=function(){this.each(function(item){item.remove()})};Constructor.prototype.focus=function(){this.each(function(item){item.focus()})};Constructor.prototype.isInViewport=function(callback){this.each(function(item){callback(helpers("viewport",item))})};Constructor.prototype.isInViewportWithEvent=function(callback){this.each(function(item){callback(helpers("viewport",item),item)})};Constructor.prototype.showDOM=function(){this.each(function(item){item.style.display="block"})};Constructor.prototype.hideDOM=function(){this.each(function(item){item.style.display="none"})};Constructor.prototype.fadeOut=function(){this.each(function(item){item.style.transition="opacity 400ms ease";setTimeout(function(){item.style.opacity=0},20);setTimeout(function(){item.style.display="none"},420)})};Constructor.prototype.fadeIn=function(){this.each(function(item){item.style.opacity=0;item.style.display="block";item.style.transition="opacity 400ms ease";setTimeout(function(){item.style.opacity=1},20)})};Constructor.prototype.toggleDom=function(){this.each(function(item){item.style.display=item.style.display=="block"?"none":"block"})};Constructor.prototype.toggleDomWithValue=function(value){this.each(function(item){item.style.display=value})};Constructor.prototype.showDOMInline=function(){this.each(function(item){item.style.display="inline-block"})};Constructor.prototype.changeInnerText=function(str,supportHTML){this.each(function(item){if(supportHTML==true){item.innerHTML=str}else item.innerText=str})};Constructor.prototype.hasClass=function(classname){var hasCls=false;this.each(function(item){hasCls=item.className.split(/\s/).indexOf(classname)>=0});return hasCls};Constructor.prototype.setAttribute=function(attribute,value){this.each(function(item){item.setAttribute(attribute,value)})};Constructor.prototype.getDataSets=function(){var datasets=[];this.each(function(item){datasets.push(Object.assign({},item.dataset))});return datasets};Constructor.prototype.click=function(){this.each(function(item){try{item.click()}catch(e){console.log(e)}})};Constructor.prototype.children=function(){var res=[];this.each(function(item){res=item.children});return res};Constructor.prototype.watch=function(object,key,callback){object.watch(""+key,function(id,oldval,newval){callback(id,oldval,newval)})};Constructor.prototype.unwatch=function(object,key){object.unwatch(""+key)};var helpers=function(){var viewport=function(arguments){try{var el=arguments[1];if(el){var top=el.offsetTop;var left=el.offsetLeft;var width=el.offsetWidth;var height=el.offsetHeight;while(el.offsetParent){el=el.offsetParent;top+=el.offsetTop;left+=el.offsetLeft}return top<window.pageYOffset+window.innerHeight&&left<window.pageXOffset+window.innerWidth&&top+height>window.pageYOffset&&left+width>window.pageXOffset}return false}catch(e){throw e}};try{return eval(arguments[0])(arguments)}catch(e){throw e}};return instantiate}();if(!Object.prototype.watch){Object.defineProperty(Object.prototype,"watch",{enumerable:false,configurable:true,writable:false,value:function(prop,handler){var oldval=this[prop],newval=oldval,getter=function(){return newval},setter=function(val){oldval=newval;return newval=handler.call(this,prop,oldval,val)};if(delete this[prop]){Object.defineProperty(this,prop,{get:getter,set:setter,enumerable:true,configurable:true})}}})}if(!Object.prototype.unwatch){Object.defineProperty(Object.prototype,"unwatch",{enumerable:false,configurable:true,writable:false,value:function(prop){var val=this[prop];delete this[prop];this[prop]=val}})}var BMScrollTo={documentVerticalScrollPosition:function(){if(self.pageYOffset)return self.pageYOffset;if(document.documentElement&&document.documentElement.scrollTop)return document.documentElement.scrollTop;if(document.body.scrollTop)return document.body.scrollTop;return 0},viewportHeight:function(){return document.compatMode==="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight},documentHeight:function(){return document.height!==undefined?document.height:document.body.offsetHeight},documentMaximumScrollPosition:function(){return this.documentHeight()-this.viewportHeight()},elementVerticalClientPositionById:function(id){var element=document.getElementById(id);var rectangle=element.getBoundingClientRect();return rectangle.top},scrollVerticalTickToPosition:function(currentPosition,targetPosition){var filter=.2;var fps=60;var difference=parseFloat(targetPosition)-parseFloat(currentPosition);var arrived=Math.abs(difference)<=.5;if(arrived){scrollTo(0,targetPosition);return}currentPosition=parseFloat(currentPosition)*(1-filter)+parseFloat(targetPosition)*filter;scrollTo(0,Math.round(currentPosition));setTimeout("BMScrollTo.scrollVerticalTickToPosition("+currentPosition+", "+targetPosition+")",1e3/fps)},scrollVerticalToElementById:function(id,padding){var element=document.getElementById(id);if(element==null){console.warn("Cannot find element with id '"+id+"'.");return}var targetPosition=this.documentVerticalScrollPosition()+this.elementVerticalClientPositionById(id)-padding;var currentPosition=this.documentVerticalScrollPosition();var maximumScrollPosition=this.documentMaximumScrollPosition();if(targetPosition>maximumScrollPosition)targetPosition=maximumScrollPosition;this.scrollVerticalTickToPosition(currentPosition,targetPosition)}};