function load_js(e,t,a){if(isInArray(loaded,e))return void("function"==typeof t&&t());loaded.push(e);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");if(r.type="text/javascript",r.src=e,a)for(var o in a)r.setAttribute(o,a[o]);r.onload=t,r.onreadystatechange=function(){"complete"==this.readyState},n.appendChild(r)}function load_css(e,t,a){if(isInArray(loaded,e))return void("function"==typeof t&&t());loaded.push(e);var n=document.getElementsByTagName("head")[0],r=document.createElement("link");if(r.rel="stylesheet",r.href=e,a)for(var o in attrs_for_script)r.setAttribute(o,a[o]);r.onload=t,r.onreadystatechange=function(){"complete"==this.readyState},n.appendChild(r)}function isInArray(e,t){return e.indexOf(t)>=0}var loaded=[];;jQuery(function(){initOpenClose();initTouch();$.slidebars();initSameHeight();$('[data-toggle="tooltip"]').tooltip();initCustomHover();initFixedScrollBlock();initDropDownClasses();initAnchors();$("img.lazy").lazyload({effect:"fadeIn",failure_limit:10});if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)$("body").addClass("isIOS");if(typeof offerScrollHandler==="function")$(window).on("scroll",offerScrollHandler);$(".add-nav>ul>li>.dropdown-menu.small-dropdown a").click(function(e){e.stopPropagation()});$(".slide-close").click(function(){$("#reviews-slide").removeClass("slide-in")});if(typeof Storage!=="undefined"){try{if(localStorage.getItem("cookie-hide")==null){$(".cookie-bar").show();setTimeout(function(){hideCookie()},1e4)}if($(".win-a-tour-block").length){if(localStorage.getItem("travel-contest")==null){setTimeout(function(){$(".win-a-tour-block").addClass("slide-show")},5e3)}}}catch(e){}}$(".win-a-tour-block .close-win").click(function(){hideTravelContest()});$(".btn-cookie").click(function(){hideCookie()});$(".top-info-bar .info-close").click(function(){$(".top-info-bar").slideUp(500)});$("li.dropdown.country-list-dropdown>a").on("click",function(event){$(this).parent().toggleClass("open")});$(".profile.dropdown>a").on("click",function(event){$(this).parent().toggleClass("open")});$("li.travel-credits-li>a").on("click",function(event){$(this).parent().toggleClass("open")});$(".tc-dropdown>button").on("click",function(event){$(this).parent().toggleClass("open")});$(".tc-value-holder>a").on("click",function(event){$(this).parent().toggleClass("open")});$(".tc-text>a").on("click",function(event){$(this).parent().toggleClass("open")});$(".credits-trigger-holder>a").on("click",function(event){$(this).parent().toggleClass("open")});$(".tc-trigger-li a.tr-link").on("click",function(event){$(this).closest(".tc-trigger-li").toggleClass("open")});$(".tc-trigger-li").on("mouseleave",function(event){$(this).removeClass("open")});$("body").on("click",function(e){if(!$("li.dropdown.country-list-dropdown").is(e.target)&&$("li.dropdown.country-list-dropdown").has(e.target).length===0&&$(".open").has(e.target).length===0){$("li.dropdown.country-list-dropdown").removeClass("open")}if(!$(".profile.dropdown").is(e.target)&&$(".profile.dropdown").has(e.target).length===0&&$(".open").has(e.target).length===0){$(".profile.dropdown").removeClass("open")}if(!$("li.travel-credits-li").is(e.target)&&$("li.travel-credits-li").has(e.target).length===0&&$(".open").has(e.target).length===0){$("li.travel-credits-li").removeClass("open")}if(!$(".tc-dropdown").is(e.target)&&$(".tc-dropdown").has(e.target).length===0&&$(".open").has(e.target).length===0){$(".tc-dropdown").removeClass("open")}if(!$(".tc-value-holder").is(e.target)&&$(".tc-value-holder").has(e.target).length===0&&$(".open").has(e.target).length===0){$(".tc-value-holder").removeClass("open")}if(!$(".tc-text").is(e.target)&&$(".tc-text").has(e.target).length===0&&$(".open").has(e.target).length===0){$(".tc-text").removeClass("open")}if(!$(".tc-trigger-li a.tr-link").is(e.target)&&$(".tc-trigger-li").has(e.target).length===0&&$(".open").has(e.target).length===0){$(".tc-trigger-li").removeClass("open")}});$("i.savings-info").on("show.bs.popover",function(e){if(isTouchDevice&&!$("i.savings-info").hasClass("unlocked"))e.preventDefault()})});var checkTimer=false;setTimeout(function(){checkTimer=true},3e3);function triggerLazyLoad(){$("img.lazy-trigger").lazyload({effect:"fadeIn",event:"lazyload"}).trigger("lazyload")}var offerScrollHandler=function(){var viewWidth=$(window).width();if(viewWidth>767){showOffer();$(window).off("scroll",offerScrollHandler)}else{if($(window).scrollTop()>1300&&checkTimer==true){showOffer(true);$(window).off("scroll",offerScrollHandler)}}};function setLocalOfferValue(x){if(typeof Storage!=="undefined"){try{localStorage.setItem("offer-show",x)}catch(e){}}}function getLocalOfferValue(){if(typeof Storage!=="undefined"){try{return localStorage.getItem("offer-show")}catch(e){}}}function toggleOfferValue(){x=getLocalOfferValue();if(x==1){y=0}else{y=1}setLocalOfferValue(y);showOffer(true)}function showOffer(cz){x=getLocalOfferValue();if(x==null){x=1;setLocalOfferValue(x)}if(cz==true){offerSwitchClass()}else{setTimeout(function(){offerSwitchClass()},3e3)}}function offerSwitchClass(){if(x==1){$(".offer-slide").addClass("slide-active");$(".offer-slide .btn-hide").removeClass("slide-up");triggerLazyLoad()}else{$(".offer-slide").removeClass("slide-active");setTimeout(function(){$(".offer-slide .btn-hide").addClass("slide-up")},300)}}function WindowOpen(){var myWindow=window.open("https://www.ingenco2.dk/crt/dispcust/c/4345/l/1","Bookmundi ApS","width=799,height=562")}function hideCookie(){if(typeof Storage!=="undefined"){try{localStorage.setItem("cookie-hide",true)}catch(e){}}$(".cookie-bar").hide()}function hideTravelContest(){if(typeof Storage!=="undefined"){try{localStorage.setItem("travel-contest",true)}catch(e){}}$(".win-a-tour-block").removeClass("slide-show");setTimeout(function(){$(".win-a-tour-block").hide()},350)}function initFixedScrollBlock(){jQuery(".main-info").fixedScrollBlock({slideBlock:".main-info-sidebar",positionType:"fixed",fixedOnlyIfFits:true});jQuery(".two-columns-wrap").fixedScrollBlock({slideBlock:".side-details",positionType:"fixed",fixedOnlyIfFits:true});jQuery(".article-wrap").fixedScrollBlock({slideBlock:".sidebar-block",positionType:"fixed",fixedOnlyIfFits:true,extraTop:49});if($(window).width()<768){jQuery(".w1").fixedScrollBlock({slideBlock:"#topsales",positionType:"fixed"})}jQuery(".main-article-holder").fixedScrollBlock({slideBlock:".main-nav-secondary",positionType:"fixed",fixedOnlyIfFits:false});jQuery(".monthly-wrap").fixedScrollBlock({slideBlock:"#colors-mobile",positionType:"fixed",fixedOnlyIfFits:false})}function initAnchors(){new SmoothScroll({anchorLinks:'.search-article .content-nav>ul>li a[href^="#"]',extraOffset:55,activeClasses:"link",animMode:"duration",animDuration:350});new SmoothScroll({anchorLinks:'.search-article .content-nav>ul>li>a[href^="#"]',extraOffset:35,activeClasses:"link",animMode:"duration",animDuration:350});new SmoothScroll({anchorLinks:".review-block a.read-link",extraOffset:55});new SmoothScroll({anchorLinks:"a.stars-link",extraOffset:55});new SmoothScroll({anchorLinks:".mobile-rating a.stars-link",extraOffset:15});new SmoothScroll({anchorLinks:".slide"});new SmoothScroll({anchorLinks:".anchors-nav a",activeClasses:"link",extraOffset:40,animMode:"duration",animDuration:200});new SmoothScroll({anchorLinks:".ship-nav a",container:".ships-block",activeClasses:"link",extraOffset:79,animMode:"duration",animDuration:200});new SmoothScroll({anchorLinks:".main-nav-top .about-scroll",activeClasses:"link",extraOffset:-1,animMode:"duration",animDuration:400});new SmoothScroll({anchorLinks:".main-nav-top .about-scroll-secondary",activeClasses:"link",extraOffset:-1,animMode:"duration",animDuration:400});new SmoothScroll({anchorLinks:".main-nav-secondary .tours-link",activeClasses:"link",extraOffset:10,animMode:"duration",animDuration:400});new SmoothScroll({anchorLinks:".main-info-tab .nav-tabs>li.has-drop-down ul a",activeClasses:"link",extraOffset:55,animMode:"duration",animDuration:400})}function initDropDownClasses(){jQuery(".add-nav>ul>li>.dropdown-menu.small-dropdown li").each(function(){var item=jQuery(this);var drop=item.find("ul");var link=item.find("a").eq(0);if(drop.length){item.addClass("has-drop-down");if(link.length)link.addClass("has-drop-down-a")}});jQuery(".main-info-tab .nav-tabs>li").each(function(){var item=jQuery(this);var drop=item.find("ul");var link=item.find("a").eq(0);if(drop.length){item.addClass("has-drop-down")}});jQuery(".search-article .content-nav>ul>li").each(function(){var item=jQuery(this);var drop=item.find("ul");var link=item.find("a").eq(0);if(drop.length){item.addClass("has-drop-down")}})}function initSameHeight(){if($(window).width()>767){jQuery(".trips-holder").sameHeight({elements:".text-wrap",flexible:true,multiLine:true})}jQuery(".related-products .trips-holder").sameHeight({elements:".text-wrap",flexible:true,multiLine:true});jQuery(".customer-block").sameHeight({elements:".row-holder",flexible:true,multiLine:true});jQuery(".main-info-tab").sameHeight({elements:".col-height",useMinHeight:true});jQuery(".acc-options-block").sameHeight({elements:".col",flexible:true,multiLine:true});jQuery(".reviews-wrap").sameHeight({elements:".quote-wrap",flexible:true,multiLine:true,useMinHeight:true});jQuery(".custom-accordion").sameHeight({elements:">li>a",flexible:true,multiLine:true,useMinHeight:true});jQuery(".three-col-holder").sameHeight({elements:".col-text",flexible:true,multiLine:true,useMinHeight:true});jQuery(".three-col-holder").sameHeight({elements:".tours-desc",flexible:true,multiLine:true,useMinHeight:true});jQuery(".why-b-three-cols").sameHeight({elements:".col-holder",flexible:true,multiLine:true,useMinHeight:true})}function initCustomHover(){jQuery(".stepy-header li").touchHover();jQuery(".stepy-step .step-holder .details-list li").touchHover();jQuery(".agency-bookings").touchHover();jQuery("#tripsearch .products-list li").touchHover();jQuery(".product-review-block").touchHover();jQuery(".group-tours-block .tours-list>li").touchHover();jQuery(".add-nav>ul>li>.dropdown-menu.small-dropdown li").touchHover();jQuery(".pay-form .info-more").touchHover();jQuery(".texpert-wrap .exp-list>li").touchHover()}function initOpenClose(){jQuery(".checkout-holder").openClose({activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"slide"});jQuery(".company-block .tab-content").openClose({activeClass:"active",opener:".btn-more",slider:".slide",animSpeed:400,effect:"slide"});jQuery("#wrapper").openClose({hideOnClickOutside:false,activeClass:"login-nav-active",opener:".login-nav-opener",slider:".login-nav-slide",animSpeed:200,effect:"slide"});jQuery(".trip-search-form").openClose({hideOnClickOutside:true,activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"slide"});jQuery(".side-nav-holder").openClose({hideOnClickOutside:false,activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"slide"});jQuery(".filters-listing>li").openClose({hideOnClickOutside:false,activeClass:"active",opener:".opener",slider:".slide",animSpeed:200,effect:"slide"});jQuery(".main-nav-top").openClose({hideOnClickOutside:true,activeClass:"active",opener:".nav-opener",slider:".slide-nav",animSpeed:400,effect:"slide"})}function initTouch(){$("#carousel-example-generic").swiperight(function(){$(".carousel").carousel("prev")});$("#carousel-example-generic").swipeleft(function(){$(".carousel").carousel("next")})}!function(e){e.fn.slideAccordion=function(n){var a=e.extend({addClassBeforeAnimation:!1,allowClickWhenExpanded:!1,activeClass:"active",opener:".opener",slider:".slide",animSpeed:300,collapsible:!0,event:"click"},n);return this.each(function(){var n=e(this),l=n.find(":has("+a.slider+")");l.each(function(){var n=e(this),l=n.find(a.opener),t=n.find(a.slider);l.bind(a.event,function(e){if(!t.is(":animated"))if(n.hasClass(a.activeClass)){if(a.allowClickWhenExpanded)return;a.collapsible&&t.slideUp(a.animSpeed,function(){s(t),n.removeClass(a.activeClass)})}else{var l=n.siblings("."+a.activeClass),d=l.find(a.slider);n.addClass(a.activeClass),i(t).hide().slideDown(a.animSpeed),d.slideUp(a.animSpeed,function(){l.removeClass(a.activeClass),s(d)})}e.preventDefault()}),n.hasClass(a.activeClass)?i(t):s(t)})})};var i=function(e){return e.css({position:"",top:"",left:"",width:""})},s=function(e){return e.show().css({position:"absolute",top:-9999,left:-9999,width:e.width()})}}(jQuery);!function(e){function t(t){this.options=e.extend({addClassBeforeAnimation:!0,hideOnClickOutside:!1,activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"fade",event:"click"},t),this.init()}t.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=e(this.options.holder),this.opener=this.holder.find(this.options.opener),this.slider=this.holder.find(this.options.slider)},attachEvents:function(){var t=this;this.eventHandler=function(e){e.preventDefault(),t.slider.hasClass(i)?t.showSlide():t.hideSlide()},t.opener.bind(t.options.event,this.eventHandler),"over"===t.options.event&&(t.opener.bind("mouseenter",function(){t.showSlide()}),t.holder.bind("mouseleave",function(){t.hideSlide()})),t.outsideClickHandler=function(i){if(t.options.hideOnClickOutside){var s=e(i.target);s.is(t.holder)||s.closest(t.holder).length||t.hideSlide()}},this.holder.hasClass(this.options.activeClass)?e(document).bind("click touchstart",t.outsideClickHandler):this.slider.addClass(i)},showSlide:function(){var t=this;t.options.addClassBeforeAnimation&&t.holder.addClass(t.options.activeClass),t.slider.removeClass(i),e(document).bind("click touchstart",t.outsideClickHandler),t.makeCallback("animStart",!0),s[t.options.effect].show({box:t.slider,speed:t.options.animSpeed,complete:function(){t.options.addClassBeforeAnimation||t.holder.addClass(t.options.activeClass),t.makeCallback("animEnd",!0)}})},hideSlide:function(){var t=this;t.options.addClassBeforeAnimation&&t.holder.removeClass(t.options.activeClass),e(document).unbind("click touchstart",t.outsideClickHandler),t.makeCallback("animStart",!1),s[t.options.effect].hide({box:t.slider,speed:t.options.animSpeed,complete:function(){t.options.addClassBeforeAnimation||t.holder.removeClass(t.options.activeClass),t.slider.addClass(i),t.makeCallback("animEnd",!1)}})},destroy:function(){this.slider.removeClass(i).css({display:""}),this.opener.unbind(this.options.event,this.eventHandler),this.holder.removeClass(this.options.activeClass).removeData("OpenClose"),e(document).unbind("click touchstart",this.outsideClickHandler)},makeCallback:function(e){if("function"==typeof this.options[e]){var t=Array.prototype.slice.call(arguments);t.shift(),this.options[e].apply(this,t)}}};var i="js-slide-hidden";!function(){var t=e('<style type="text/css">')[0],s="."+i;s+="{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}",t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s)),e("head").append(t)}();var s={slide:{show:function(e){e.box.stop(!0).hide().slideDown(e.speed,e.complete)},hide:function(e){e.box.stop(!0).slideUp(e.speed,e.complete)}},fade:{show:function(e){e.box.stop(!0).hide().fadeIn(e.speed,e.complete)},hide:function(e){e.box.stop(!0).fadeOut(e.speed,e.complete)}},none:{show:function(e){e.box.hide().show(0,e.complete)},hide:function(e){e.box.hide(0,e.complete)}}};e.fn.openClose=function(i){return this.each(function(){jQuery(this).data("OpenClose",new t(e.extend(i,{holder:this})))})}}(jQuery);!function(t){t.slidebars=function(s){function e(){!c.disableOver||"number"==typeof c.disableOver&&c.disableOver>=k?(w=!0,t("html").addClass("sb-init"),c.hideControlClasses&&T.removeClass("sb-hide"),i()):"number"==typeof c.disableOver&&c.disableOver<k&&(w=!1,t("html").removeClass("sb-init"),c.hideControlClasses&&T.addClass("sb-hide"),g.css("minHeight",""),(p||y)&&o())}function i(){g.css("minHeight","");var s=parseInt(g.css("height"),10),e=parseInt(t("html").css("height"),10);e>s&&g.css("minHeight",t("html").css("height")),m&&m.hasClass("sb-width-custom")&&m.css("width",m.attr("data-sb-width")),C&&C.hasClass("sb-width-custom")&&C.css("width",C.attr("data-sb-width")),m&&(m.hasClass("sb-style-push")||m.hasClass("sb-style-overlay"))&&m.css("marginLeft","-"+m.css("width")),C&&(C.hasClass("sb-style-push")||C.hasClass("sb-style-overlay"))&&C.css("marginRight","-"+C.css("width")),c.scrollLock&&t("html").addClass("sb-scroll-lock")}function n(t,s,e){function n(){a.removeAttr("style"),i()}var a;if(a=t.hasClass("sb-style-push")?g.add(t).add(O):t.hasClass("sb-style-overlay")?t:g.add(O),"translate"===x)"0px"===s?n():a.css("transform","translate( "+s+" )");else if("side"===x)"0px"===s?n():("-"===s[0]&&(s=s.substr(1)),a.css(e,"0px"),setTimeout(function(){a.css(e,s)},1));else if("jQuery"===x){"-"===s[0]&&(s=s.substr(1));var o={};o[e]=s,a.stop().animate(o,400)}}function a(s){function e(){w&&"left"===s&&m?(t("html").addClass("sb-active sb-active-left"),m.addClass("sb-active"),n(m,m.css("width"),"left"),setTimeout(function(){p=!0},400)):w&&"right"===s&&C&&(t("html").addClass("sb-active sb-active-right"),C.addClass("sb-active"),n(C,"-"+C.css("width"),"right"),setTimeout(function(){y=!0},400))}"left"===s&&m&&y||"right"===s&&C&&p?(o(),setTimeout(e,400)):e()}function o(s,e){(p||y)&&(p&&(n(m,"0px","left"),p=!1),y&&(n(C,"0px","right"),y=!1),setTimeout(function(){t("html").removeClass("sb-active sb-active-left sb-active-right"),m&&m.removeClass("sb-active"),C&&C.removeClass("sb-active"),"undefined"!=typeof s&&(void 0===typeof e&&(e="_self"),window.open(s,e))},400))}function l(t){"left"===t&&m&&(p?o():a("left")),"right"===t&&C&&(y?o():a("right"))}function r(t,s){t.stopPropagation(),t.preventDefault(),"touchend"===t.type&&s.off("click")}var c=t.extend({siteClose:!0,scrollLock:!1,disableOver:!1,hideControlClasses:!1},s),h=document.createElement("div").style,d=!1,f=!1;(""===h.MozTransition||""===h.WebkitTransition||""===h.OTransition||""===h.transition)&&(d=!0),(""===h.MozTransform||""===h.WebkitTransform||""===h.OTransform||""===h.transform)&&(f=!0);var u=navigator.userAgent,b=!1,v=!1;/Android/.test(u)?b=u.substr(u.indexOf("Android")+8,3):/(iPhone|iPod|iPad)/.test(u)&&(v=u.substr(u.indexOf("OS ")+3,3).replace("_",".")),(b&&3>b||v&&5>v)&&t("html").addClass("sb-static");var g=t("#sb-site, .sb-site-container");if(t(".sb-left").length)var m=t(".sb-left"),p=!1;if(t(".sb-right").length)var C=t(".sb-right"),y=!1;var w=!1,k=t(window).width(),T=t(".sb-toggle-left, .sb-toggle-right, .sb-open-left, .sb-open-right, .sb-close"),O=t(".sb-slide");e(),t(window).resize(function(){var s=t(window).width();k!==s&&(k=s,e(),p&&a("left"),y&&a("right"))});var x;d&&f?(x="translate",b&&4.4>b&&(x="side")):x="jQuery",this.slidebars={open:a,close:o,toggle:l,init:function(){return w},active:function(t){return"left"===t&&m?p:"right"===t&&C?y:void 0},destroy:function(t){"left"===t&&m&&(p&&o(),setTimeout(function(){m.remove(),m=!1},400)),"right"===t&&C&&(y&&o(),setTimeout(function(){C.remove(),C=!1},400))}},t(".sb-toggle-left").on("touchend click",function(s){r(s,t(this)),l("left")}),t(".sb-toggle-right").on("touchend click",function(s){r(s,t(this)),l("right")}),t(".sb-open-left").on("touchend click",function(s){r(s,t(this)),a("left")}),t(".sb-open-right").on("touchend click",function(s){r(s,t(this)),a("right")}),t(".sb-close").on("touchend click",function(s){if(t(this).is("a")||t(this).children().is("a")){if("click"===s.type){s.stopPropagation(),s.preventDefault();var e=t(this).is("a")?t(this):t(this).find("a"),i=e.attr("href"),n=e.attr("target")?e.attr("target"):"_self";o(i,n)}}else r(s,t(this)),o()}),g.on("touchend click",function(s){c.siteClose&&(p||y)&&(r(s,t(this)),o())})}}(jQuery);!function(e){function t(t,h){var o,a=e(),g=0,r=t.eq(0).offset().top;t.each(function(){var t=e(this);t.offset().top===r?a=a.add(this):(o=i(a),g=Math.max(g,s(a,o,h)),a=t,r=t.offset().top)}),a.length&&(o=i(a),g=Math.max(g,s(a,o,h))),h.biggestHeight&&t.css(h.useMinHeight&&n?"minHeight":"height",g)}function i(t){var i=0;return t.each(function(){i=Math.max(i,e(this).outerHeight())}),i}function s(t,i,s){var h,o="number"==typeof i?i:i.height();return t.removeClass(s.leftEdgeClass).removeClass(s.rightEdgeClass).each(function(){var t=e(this),a=0,g="border-box"===t.css("boxSizing")||"border-box"===t.css("-moz-box-sizing")||!1;"number"!=typeof i&&t.parents().each(function(){var t=e(this);return i.is(this)?!1:void(a+=t.outerHeight()-t.height())}),h=o-a,h-=g?0:t.outerHeight()-t.height(),h>0&&t.css(s.useMinHeight&&n?"minHeight":"height",h)}),t.filter(":first").addClass(s.leftEdgeClass),t.filter(":last").addClass(s.rightEdgeClass),h}e.fn.sameHeight=function(i){var h=e.extend({skipClass:"same-height-ignore",leftEdgeClass:"same-height-left",rightEdgeClass:"same-height-right",elements:">*",flexible:!1,multiLine:!1,useMinHeight:!1,biggestHeight:!1},i);return this.each(function(){function i(){r.css(h.useMinHeight&&n?"minHeight":"height",""),h.multiLine?t(r,h):s(r,g,h)}var o,a,g=e(this),r=g.find(h.elements).not("."+h.skipClass);if(r.length){i();var f=function(){a||(a=!0,i(),clearTimeout(o),o=setTimeout(function(){i(),setTimeout(function(){a=!1},10)},100))};h.flexible&&e(window).bind("resize orientationchange fontresize",f),e(window).bind("load",f)}})};var n="undefined"!=typeof document.documentElement.style.maxHeight}(jQuery);(function(e,t,n){typeof define=="function"&&define.amd?define(["jquery"],function(r){return n(r,e,t),r.mobile}):n(e.jQuery,e,t)})(this,document,function(e,t,n,r){(function(e,t,n,r){function T(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function N(t,n){var i=t.type,s,o,a,l,c,h,p,d,v;t=e.Event(t),t.type=n,s=t.originalEvent,o=e.event.props,i.search(/^(mouse|click)/)>-1&&(o=f);if(s)for(p=o.length,l;p;)l=o[--p],t[l]=s[l];i.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(i.search(/^touch/)!==-1){a=T(s),i=a.touches,c=a.changedTouches,h=i&&i.length?i[0]:c&&c.length?c[0]:r;if(h)for(d=0,v=u.length;d<v;d++)l=u[d],t[l]=h[l]}return t}function C(t){var n={},r,s;while(t){r=e.data(t,i);for(s in r)r[s]&&(n[s]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function k(t,n){var r;while(t){r=e.data(t,i);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function L(){g=!1}function A(){g=!0}function O(){E=0,v.length=0,m=!1,A()}function M(){L()}function _(){D(),c=setTimeout(function(){c=0,O()},e.vmouse.resetTimerDuration)}function D(){c&&(clearTimeout(c),c=0)}function P(t,n,r){var i;if(r&&r[t]||!r&&k(n.target,t))i=N(n,t),e(n.target).trigger(i);return i}function H(t){var n=e.data(t.target,s),r;!m&&(!E||E!==n)&&(r=P("v"+t.type,t),r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function B(t){var n=T(t).touches,r,i,o;n&&n.length===1&&(r=t.target,i=C(r),i.hasVirtualBinding&&(E=w++,e.data(r,s,E),D(),M(),d=!1,o=T(t).touches[0],h=o.pageX,p=o.pageY,P("vmouseover",t,i),P("vmousedown",t,i)))}function j(e){if(g)return;d||P("vmousecancel",e,C(e.target)),d=!0,_()}function F(t){if(g)return;var n=T(t).touches[0],r=d,i=e.vmouse.moveDistanceThreshold,s=C(t.target);d=d||Math.abs(n.pageX-h)>i||Math.abs(n.pageY-p)>i,d&&!r&&P("vmousecancel",t,s),P("vmousemove",t,s),_()}function I(e){if(g)return;A();var t=C(e.target),n,r;P("vmouseup",e,t),d||(n=P("vclick",e,t),n&&n.isDefaultPrevented()&&(r=T(e).changedTouches[0],v.push({touchID:E,x:r.clientX,y:r.clientY}),m=!0)),P("vmouseout",e,t),d=!1,_()}function q(t){var n=e.data(t,i),r;if(n)for(r in n)if(n[r])return!0;return!1}function R(){}function U(t){var n=t.substr(1);return{setup:function(){q(this)||e.data(this,i,{});var r=e.data(this,i);r[t]=!0,l[t]=(l[t]||0)+1,l[t]===1&&b.bind(n,H),e(this).bind(n,R),y&&(l.touchstart=(l.touchstart||0)+1,l.touchstart===1&&b.bind("touchstart",B).bind("touchend",I).bind("touchmove",F).bind("scroll",j))},teardown:function(){--l[t],l[t]||b.unbind(n,H),y&&(--l.touchstart,l.touchstart||b.unbind("touchstart",B).unbind("touchmove",F).unbind("touchend",I).unbind("scroll",j));var r=e(this),s=e.data(this,i);s&&(s[t]=!1),r.unbind(n,R),q(this)||r.removeData(i)}}}var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],f=e.event.props.concat(a),l={},c=0,h=0,p=0,d=!1,v=[],m=!1,g=!1,y="addEventListener"in n,b=e(n),w=1,E=0,S,x;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(x=0;x<o.length;x++)e.event.special[o[x]]=U(o[x]);y&&n.addEventListener("click",function(t){var n=v.length,r=t.target,i,o,u,a,f,l;if(n){i=t.clientX,o=t.clientY,S=e.vmouse.clickDistanceThreshold,u=r;while(u){for(a=0;a<n;a++){f=v[a],l=0;if(u===r&&Math.abs(f.x-i)<S&&Math.abs(f.y-o)<S||e.data(u,s)===f.touchID){t.preventDefault(),t.stopPropagation();return}}u=u.parentNode}}},!0)})(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){function l(t,n,i,s){var o=i.type;i.type=n,s?e.event.trigger(i,r,t):e.event.dispatch.call(t,i),i.type=o}var i=e(n),s=e.mobile.support.touch,o="touchmove scroll",u=s?"touchstart":"mousedown",a=s?"touchend":"mouseup",f=s?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function s(e,n){r=n,l(t,r?"scrollstart":"scrollstop",e)}var t=this,n=e(t),r,i;n.bind(o,function(t){if(!e.event.special.scrollstart.enabled)return;r||s(t,!0),clearTimeout(i),i=setTimeout(function(){s(t,!1)},50)})},teardown:function(){e(this).unbind(o)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),r=!1;n.bind("vmousedown",function(s){function a(){clearTimeout(u)}function f(){a(),n.unbind("vclick",c).unbind("vmouseup",a),i.unbind("vmousecancel",f)}function c(e){f(),!r&&o===e.target?l(t,"tap",e):r&&e.preventDefault()}r=!1;if(s.which&&s.which!==1)return!1;var o=s.target,u;n.bind("vmouseup",a).bind("vclick",c),i.bind("vmousecancel",f),u=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(r=!0),l(t,"taphold",e.Event("taphold",{target:o}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,r=t.pageYOffset,i=e.clientX,s=e.clientY;if(e.pageY===0&&Math.floor(s)>Math.floor(e.pageY)||e.pageX===0&&Math.floor(i)>Math.floor(e.pageX))i-=n,s-=r;else if(s<e.pageY-r||i<e.pageX-n)i=e.pageX-n,s=e.pageY-r;return{x:i,y:s}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y]}},handleSwipe:function(t,n,r,i){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return l(r,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:n}),!0),l(r,s,e.Event(s,{target:i,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,r=e(n),s={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=s,s.start=function(t){if(e.event.special.swipe.eventInProgress)return;e.event.special.swipe.eventInProgress=!0;var r,o=e.event.special.swipe.start(t),u=t.target,l=!1;s.move=function(t){if(!o||t.isDefaultPrevented())return;r=e.event.special.swipe.stop(t),l||(l=e.event.special.swipe.handleSwipe(o,r,n,u),l&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(o.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()},s.stop=function(){l=!0,e.event.special.swipe.eventInProgress=!1,i.off(f,s.move),s.move=null},i.on(f,s.move).one(a,s.stop)},r.on(u,s.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,t.length--,t.length===0&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(u,n.start),n.move&&i.off(f,n.move),n.stop&&i.off(a,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this)});!function(o){var e,t,n,a="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,s=/Windows Phone/.test(navigator.userAgent),r=a&&"touchstart"||s&&navigator.pointerEnabled&&"pointerdown"||s&&navigator.msPointerEnabled&&"MSPointerDown"||"mouseenter",i=a&&"touchend"||s&&navigator.pointerEnabled&&"pointerup"||s&&navigator.msPointerEnabled&&"MSPointerUp"||"mouseleave";a||s?(n=function(o){o.preventDefault()},e=function(e){var t=e.data,a=o(this),s=function(e){var i=o(e.target);i.is(a)||i.closest(a).length||(a.removeClass(t.hoverClass),a.off("click",n),t.onLeave&&t.onLeave(a),o(document).off(r,s))};a.hasClass(t.hoverClass)||(a.addClass(t.hoverClass),a.one("click",n),o(document).on(r,s),t.onHover&&t.onHover(a))}):(e=function(e){var n=e.data,a=o(this);a.addClass(n.hoverClass),o(n.context).on(i,n.selector,n,t),n.onHover&&n.onHover(a)},t=function(e){var n=e.data,a=o(this);a.removeClass(n.hoverClass),o(n.context).off(i,n.selector,t),n.onLeave&&n.onLeave(a)}),o.fn.touchHover=function(t){var n=o.extend({context:this.context,selector:this.selector,hoverClass:"hover"},t);return o(this.context).on(r,this.selector,n,e),this}}(jQuery);!function(t,i){"use strict";function o(i){this.options=t.extend({fixedActiveClass:"fixed-position",slideBlock:"[data-scroll-block]",positionType:"auto",fixedOnlyIfFits:!0,container:null,animDelay:100,animSpeed:200,extraBottom:0,extraTop:0},i),this.initStructure(),this.attachEvents()}var s="ontouchstart"in i||i.DocumentTouch&&document instanceof DocumentTouch||/Windows Phone/.test(navigator.userAgent);o.prototype={initStructure:function(){this.win=t(i),this.container=t(this.options.container),this.slideBlock=this.container.find(this.options.slideBlock),"auto"===this.options.positionType&&(this.options.positionType=s?"absolute":"fixed")},attachEvents:function(){var t=this;this.onResize=function(){t.resizeHandler()},this.onScroll=function(){t.scrollHandler()},this.win.on({resize:this.onResize,scroll:this.onScroll}),this.resizeHandler()},recalculateOffsets:function(){{var t=this.slideBlock.offset(),i=this.slideBlock.position(),o=this.container.offset();this.win.height()}this.data={windowHeight:this.win.height(),windowWidth:this.win.width(),blockPositionLeft:i.left,blockPositionTop:i.top,blockOffsetLeft:t.left,blockOffsetTop:t.top,blockHeight:this.slideBlock.innerHeight(),holderOffsetLeft:o.left,holderOffsetTop:o.top,holderHeight:this.container.innerHeight()}},isVisible:function(){return this.slideBlock.prop("offsetHeight")},fitsInViewport:function(){return this.options.fixedOnlyIfFits&&this.data?this.data.blockHeight+this.options.extraTop<=this.data.windowHeight:!0},resizeHandler:function(){this.isVisible()&&(o.stickyMethods[this.options.positionType].onResize.apply(this,arguments),this.scrollHandler())},scrollHandler:function(){if(this.isVisible()){if(!this.data)return void this.resizeHandler();this.currentScrollTop=this.win.scrollTop(),this.currentScrollLeft=this.win.scrollLeft(),o.stickyMethods[this.options.positionType].onScroll.apply(this,arguments)}},refresh:function(){this.data&&(this.data.holderHeight=this.container.innerHeight(),this.data.blockHeight=this.slideBlock.innerHeight(),this.scrollHandler())},destroy:function(){this.slideBlock.removeAttr("style").removeClass(this.options.fixedActiveClass),this.win.off({resize:this.onResize,scroll:this.onScroll})}},o.stickyMethods={fixed:{onResize:function(){this.slideBlock.removeAttr("style"),this.recalculateOffsets()},onScroll:function(){this.fitsInViewport()&&this.currentScrollTop+this.options.extraTop>this.data.blockOffsetTop?(this.slideBlock.css(this.currentScrollTop+this.options.extraTop+this.data.blockHeight>this.data.holderOffsetTop+this.data.holderHeight-this.options.extraBottom?{position:"absolute",top:this.data.blockPositionTop+this.data.holderHeight-this.data.blockHeight-this.options.extraBottom-(this.data.blockOffsetTop-this.data.holderOffsetTop),left:this.data.blockPositionLeft}:{position:"fixed",top:this.options.extraTop,left:this.data.blockOffsetLeft-this.currentScrollLeft}),this.slideBlock.addClass(this.options.fixedActiveClass)):this.slideBlock.removeClass(this.options.fixedActiveClass).removeAttr("style")}},absolute:{onResize:function(){this.slideBlock.removeAttr("style"),this.recalculateOffsets(),this.slideBlock.css({position:"absolute",top:this.data.blockPositionTop,left:this.data.blockPositionLeft}),this.slideBlock.addClass(this.options.fixedActiveClass)},onScroll:function(){var t=this;clearTimeout(this.animTimer),this.animTimer=setTimeout(function(){var i=t.currentScrollTop+t.options.extraTop,o=t.data.blockPositionTop-(t.data.blockOffsetTop-t.data.holderOffsetTop),s=t.data.holderHeight-t.data.blockHeight-t.options.extraBottom,e=o+Math.min(i-t.data.holderOffsetTop,s),n=t.fitsInViewport()&&i>t.data.blockOffsetTop?e:t.data.blockPositionTop;t.slideBlock.stop().animate({top:n},t.options.animSpeed)},this.options.animDelay)}}},t.fn.fixedScrollBlock=function(i){return this.each(function(){var s=t.extend({},i,{container:this}),e=new o(s);t.data(this,"FixedScrollBlock",e)})},i.FixedScrollBlock=o}(jQuery,this);(function($,exports){var page,win=$(window),activeBlock,activeWheelHandler,wheelEvents="onwheel"in document||document.documentMode>=9?"wheel":"mousewheel DOMMouseScroll";function scrollTo(offset,options,callback){var scrollBlock;if(document.body){if(typeof options==="number"){options={duration:options}}else{options=options||{}}page=page||$("html, body");scrollBlock=options.container||page}else{return}if(typeof offset==="number"){offset={top:offset}}if(activeBlock&&activeWheelHandler){activeBlock.off(wheelEvents,activeWheelHandler)}if(options.wheelBehavior&&options.wheelBehavior!=="none"){activeWheelHandler=function(e){if(options.wheelBehavior==="stop"){scrollBlock.off(wheelEvents,activeWheelHandler);scrollBlock.stop()}else if(options.wheelBehavior==="ignore"){e.preventDefault()}};activeBlock=scrollBlock.on(wheelEvents,activeWheelHandler)}scrollBlock.stop().animate({scrollLeft:offset.left,scrollTop:offset.top},options.duration,function(){if(activeWheelHandler){scrollBlock.off(wheelEvents,activeWheelHandler)}if($.isFunction(callback)){callback()}})}function SmoothScroll(options){this.options=$.extend({anchorLinks:'a[href^="#"]',container:null,extraOffset:null,activeClasses:null,easing:"swing",animMode:"duration",animDuration:800,animSpeed:1500,anchorActiveClass:"anchor-active",sectionActiveClass:"section-active",wheelBehavior:"stop",useNativeAnchorScrolling:false},options);this.init()}SmoothScroll.prototype={init:function(){this.initStructure();this.attachEvents()},initStructure:function(){var self=this;this.container=this.options.container?$(this.options.container):$("html,body");this.scrollContainer=this.options.container?this.container:win;this.anchorLinks=jQuery(this.options.anchorLinks).filter(function(){if(!!this.getAttribute("href"))return document.getElementById(this.getAttribute("href").slice(1))})},getAnchorTarget:function(link){var targetId=$(link).attr("href");return $(targetId.length>1?targetId:"html")},getTargetOffset:function(block){var blockOffset=block.offset().top;if(this.options.container){blockOffset-=this.container.offset().top-this.container.prop("scrollTop")}if(typeof this.options.extraOffset==="number"){blockOffset-=this.options.extraOffset}else if(typeof this.options.extraOffset==="function"){blockOffset-=this.options.extraOffset(block)}return{top:blockOffset}},attachEvents:function(){var self=this;if(this.options.activeClasses&&this.anchorLinks.length){this.anchorData=[];for(var i=0;i<this.anchorLinks.length;i++){var link=jQuery(this.anchorLinks[i]),targetBlock=self.getAnchorTarget(link),anchorDataItem;$.each(self.anchorData,function(index,item){if(item.block[0]===targetBlock[0]){anchorDataItem=item}});if(anchorDataItem){anchorDataItem.link=anchorDataItem.link.add(link)}else{self.anchorData.push({link:link,block:targetBlock})}}this.resizeHandler=function(){self.recalculateOffsets()};this.scrollHandler=function(){self.refreshActiveClass()};this.recalculateOffsets();this.scrollContainer.on("scroll",this.scrollHandler);win.on("resize",this.resizeHandler)}this.clickHandler=function(e){self.onClick(e)};if(!this.options.useNativeAnchorScrolling){this.anchorLinks.on("click",this.clickHandler)}},recalculateOffsets:function(){var self=this;$.each(this.anchorData,function(index,data){data.offset=self.getTargetOffset(data.block);data.height=data.block.outerHeight()});this.refreshActiveClass()},refreshActiveClass:function(){var self=this,foundFlag=false,containerHeight=this.container.prop("scrollHeight"),viewPortHeight=this.scrollContainer.height(),scrollTop=this.options.container?this.container.prop("scrollTop"):win.scrollTop();if(this.options.customScrollHandler){this.options.customScrollHandler.call(this,scrollTop,this.anchorData);return}this.anchorData.sort(function(a,b){return a.offset.top-b.offset.top});function toggleActiveClass(anchor,block,state){anchor.toggleClass(self.options.anchorActiveClass,state);block.toggleClass(self.options.sectionActiveClass,state)}$.each(this.anchorData,function(index){var reverseIndex=self.anchorData.length-index-1,data=self.anchorData[reverseIndex],anchorElement=self.options.activeClasses==="parent"?data.link.parent():data.link;if(scrollTop>=containerHeight-viewPortHeight){if(reverseIndex===self.anchorData.length-1){toggleActiveClass(anchorElement,data.block,true)}else{toggleActiveClass(anchorElement,data.block,false)}}else{if(!foundFlag&&(scrollTop>=data.offset.top-1||reverseIndex===0)){foundFlag=true;toggleActiveClass(anchorElement,data.block,true)}else{toggleActiveClass(anchorElement,data.block,false)}}})},calculateScrollDuration:function(offset){var distance;if(this.options.animMode==="speed"){distance=Math.abs(this.scrollContainer.scrollTop()-offset.top);return distance/this.options.animSpeed*1e3}else{return this.options.animDuration}},onClick:function(e){var targetBlock=this.getAnchorTarget(e.currentTarget),targetOffset=this.getTargetOffset(targetBlock);e.preventDefault();scrollTo(targetOffset,{container:this.container,wheelBehavior:this.options.wheelBehavior,duration:this.calculateScrollDuration(targetOffset)})},destroy:function(){if(this.options.activeClasses){win.off("resize",this.resizeHandler);this.scrollContainer.off("scroll",this.scrollHandler)}this.anchorLinks.off("click",this.clickHandler)}};$.extend(SmoothScroll,{scrollTo:function(blockOrOffset,durationOrOptions,callback){scrollTo(blockOrOffset,durationOrOptions,callback)}});exports.SmoothScroll=SmoothScroll})(jQuery,this);!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);;$(document).ready(function(){$("input").attr("autocomplete","off");$("form").validate();$("#signUpLink").click(function(){setTimeout(function(){$("#signupTabLink").trigger("click")},300)});$("#loginLink").click(function(){setTimeout(function(){$("#loginTabLink").trigger("click")},300)});$(".home-search-button").click(function(){q=$("#homeSearch1").val();var active="1";if(q==""){q=$("#homeSearch2").val();var active="2"}if(q==null||q==""){$("#home-search-button"+active).removeClass("loading");$(".home-search-holder").addClass("error-validation");setTimeout(function(){$(".home-search-holder").removeClass("error-validation")},1e3);return false}$("#home-search-form"+active).submit()});$("#global-home-search-button").click(function(){q=$("#homeSearch1").val();if(q==null||q==""){$(".trip-search").addClass("error-validation");setTimeout(function(){$(".trip-search").removeClass("error-validation")},1e3);return false}$("#home-search-form1").submit()});$(".currency-select").change(function(){curr=$(this).val();var seperator=$(this).find(":selected").data("seperator");changeCurrency(curr,seperator)});$(".currency-select").keypress(function(){curr=$(this).val();var seperator=$(this).find(":selected").data("seperator");changeCurrency(curr,seperator)});$("#recent-dropdown").click(function(){if(typeof Storage!=="undefined"){try{localStorage.setItem("seenRTC",true)}catch(e){}$("#recentTripsCount").hide()}var id=$("#listing-dropdown").data("pid");$.get(baseUrl+"/ws/getRecentTrips/"+id,function(data){$("#recent-dropdown-list").html(data)})});checkRTC();checkRecentTrips();window.onerror=function(msg,url,line,col,error){if(logJSErrors){var senterror=false;if(typeof Storage!=="undefined"){var senterror=sessionStorage.getItem("sentError")}if(!senterror){var extra=!col?"":"\ncolumn: "+col;extra+=!error?"":"\nerror: "+error;if(error)msg=error.stack;var error="Error: "+msg+"\nurl: "+url+"\nline: "+line+extra;$.post(baseUrl+"/site/savejserror",{error:error});if(typeof Storage!=="undefined"){var senterror=sessionStorage.setItem("sentError",true)}}}}});var isMob=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);var isTouchDevice="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;var isWinPhoneDevice=navigator.msPointerEnabled&&/MSIE 10.*Touch/.test(navigator.userAgent);function checkRTC(){if(typeof Storage!=="undefined"){var seen=localStorage.getItem("seenRTC");if(!seen||seen==null){$("#recentTripsCount").show()}}}function checkRecentTrips(){if(typeof Storage!=="undefined"){var ipp=localStorage.getItem("ipp");try{ipp=JSON.parse(ipp);if(ipp.length>0){$("#listing-dropdown").show();var no=ipp.length-1;if(ipp.length>5){no=5}if(no==3){$("#recentTripsCount").addClass("heart-blink")}if(no>0){$("#recentTripsCount").html(no)}}}catch(err){}}}function changeCurrency(curr,seperator){if(seperator=="."){seperator="dot"}if(seperator==","){seperator="comma"}if(seperator==" "){seperator="space"}if(seperator=="'"){seperator="apos"}url=baseUrl+"/currencymanager/default/setcurrency/currency/"+curr+"/seperator/"+seperator;$.get(url,function(data){window.location.reload(true)})}function printthis(){window.print()}function checkCookie(){var cookieEnabled=navigator.cookieEnabled?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!cookieEnabled){document.cookie="testcookie";cookieEnabled=document.cookie.indexOf("testcookie")!=-1?true:false}return cookieEnabled?true:false}function toast(options){angular.element(document.getElementById("TrkAppController")).scope().toast(options)}function showhide(id){$(id).toggle("slow")}setTimeout(console.log.bind(console,"%cStop!","color: red; font-size:80px;font-weight: bold;"));setTimeout(console.log.bind(console,"%cThis browser feature is intended for developers!","color: black; font-size:20px;"));;var __dcid;var loadD=false;var departureView=false;var insuranceView=false;var socialView=false;var searchsocialView=false;var reviewImageView=false;var parallaxView=false;function isElementInViewport(el){if(el){var top=el.offsetTop;var left=el.offsetLeft;var width=el.offsetWidth;var height=el.offsetHeight;while(el.offsetParent){el=el.offsetParent;top+=el.offsetTop;left+=el.offsetLeft}return top<window.pageYOffset+window.innerHeight&&left<window.pageXOffset+window.innerWidth&&top+height>window.pageYOffset&&left+width>window.pageXOffset}return false}var supportBlock='<li><span class="img-logo" onclick="WindowOpen()"><img class="img-responsive" src="'+bmGlobalVars.cloudfrontPath+'/themes/global/resources/images/co2neutral-logo.png" alt="CO2 Neutral Website" width="100" height="46"></span></li><li><span class="img-logo wwf"><img class="img-responsive" src="'+bmGlobalVars.cloudfrontPath+'/themes/global/resources/images/atta.png" alt="ATTA Bookmundi Membership" width="125" height="58"></span></li><li><span class="img-logo wwf"><img class="img-responsive" src="'+bmGlobalVars.cloudfrontPath+'/themes/global/resources/images/wwf-bookmundi-sponsor-2019.png" alt="WWF Bookmundi Sponsor" width="125" height="58"></span></li>';var phonelist='<li title="Denmark"><img src="'+bmGlobalVars.cloudfrontPath+'/themes/global/resources/images/flags/denmark.svg" height="16" width="16" alt="Denmark Flag"> <a href="tel:+4589871798" class="tel-link">+45-8082-6045</a></li><li title="USA"><img src="'+bmGlobalVars.cloudfrontPath+'/themes/global/resources/images/flags/usa.svg" height="16" width="16" alt="USA Flag"> <a href="tel:+13473184887" class="tel-link">+1347-318-4887</a></li><li title="Japan"><img class="japan" src="'+bmGlobalVars.cloudfrontPath+'/themes/global/resources/images/flags/japan.svg" height="19" width="19" alt="Japan Flag"> <a href="tel:+81345405834" class="tel-link">+813-4540-5834</a></li>';var insuranceBlock='<a href="'+baseUrl+'/travel-insurance" target="_blank"> <img class="img-responsive" src="'+bmGlobalVars.cloudfrontPath+'/themes/global/resources/images/travel-ins.jpg" alt="Travel Insurance" width="365" height="105"> </a>';window.addEventListener("scroll",loadScripts);document.getElementById("menu-header").addEventListener("click",clickEventOnly);searchPageIcon();function loadScripts(){if(loadD==false){var footer=document.getElementById("footer");var support=document.getElementById("supporting-block");var phone=document.getElementById("phone-list");var insurance=document.getElementById("insurance-block");var reviewImage=document.getElementsByClassName("cus-review-images")[0];var parallaxBlock=document.getElementById("parallax-block");var socialIcon=document.getElementById("social-icon");loadD=loadD==false?isElementInViewport(socialIcon):true;loadD=loadD==false?isElementInViewport(footer):true;insuranceView=insuranceView==false?isElementInViewport(insurance):true;reviewImageView=reviewImageView===false?isElementInViewport(reviewImage):true;parallaxView=parallaxView===false?isElementInViewport(parallaxBlock):true;if(loadD){support.innerHTML=supportBlock;phone.innerHTML=phonelist;document.getElementById("currency-form").style.display="block";loadFBTwitter();__dcid=__dcid||[];__dcid.push(["DigiCertClickID_P7QnpV2n","10","s","black","P7QnpV2n"]);(function(){var cid=document.createElement("script");cid.async=true;cid.src="//seal.digicert.com/seals/cascade/seal.min.js";var s=document.getElementsByTagName("script");var ls=s[s.length-1];ls.parentNode.insertBefore(cid,ls.nextSibling)})()}insuranceView==true?insurance.innerHTML=insuranceBlock:"";if(reviewImageView){load_css(baseUrl+"/themes/global/resources/css/fancybox.css");load_js(baseUrl+"/themes/global/resources/js/fancybox.js")}if(parallaxView&&!isMob){var pevt=document.createEvent("HTMLEvents");pevt.initEvent("resize",true,false);window.dispatchEvent(pevt)}}}function loadScriptForDeparture(){var departure=document.getElementById("api-availability");if(departureView==false){departureView=departureView==false?isElementInViewport(departure):true;if(departureView){return true}}return false}function clickEventOnly(){if(socialView==false){var socialOnly=document.getElementById("social-only");socialView=socialView==false?isElementInViewport(socialOnly):true;if(socialView)loadFBTwitter()}}function searchPageIcon(){if(searchsocialView==false){var socialIcon=document.getElementById("social-icon");searchsocialView=searchsocialView==false?isElementInViewport(socialIcon):true;searchsocialView&&setTimeout(function(){loadFBTwitter()},5e3)}}function loadFBTwitter(){(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=1581686285431624";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");window.twttr=function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f)};return t}(document,"script","twitter-wjs")};"format global";"deps angular";"deps moment";!function(){"use strict";function a(a,b){return a.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null}).constant("moment",b).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(b,c,d,e,f){return function(g,h,i){function j(){var a;if(e.serverTime){var b=(new Date).getTime(),d=b-u+e.serverTime;a=c(d)}else a=c();return a}function k(){q&&(b.clearTimeout(q),q=null)}function l(a){if(h.text(a.from(j(),s)),t&&!h.attr("title")&&h.attr("title",a.local().format(t)),!x){var c=Math.abs(j().diff(a,"minute")),d=3600;1>c?d=1:60>c?d=30:180>c&&(d=300),q=b.setTimeout(function(){l(a)},1e3*d)}}function m(a){y&&h.attr("datetime",a)}function n(){if(k(),o){var a=d.preprocessDate(o,v,r);l(a),m(a.toISOString())}}var o,p,q=null,r=f.format,s=e.withoutSuffix,t=e.titleFormat,u=(new Date).getTime(),v=f.preprocess,w=i.amTimeAgo.replace(/^::/,""),x=0===i.amTimeAgo.indexOf("::"),y="TIME"===h[0].nodeName.toUpperCase();p=g.$watch(w,function(a){return"undefined"==typeof a||null===a||""===a?(k(),void(o&&(h.text(""),m(""),o=null))):(o=a,n(),void(void 0!==a&&x&&p()))}),a.isDefined(i.amWithoutSuffix)&&g.$watch(i.amWithoutSuffix,function(a){"boolean"==typeof a?(s=a,n()):s=e.withoutSuffix}),i.$observe("amFormat",function(a){"undefined"!=typeof a&&(r=a,n())}),i.$observe("amPreprocess",function(a){v=a,n()}),g.$on("$destroy",function(){k()}),g.$on("amMoment:localeChanged",function(){n()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(b,c,d,e){var f=this;this.preprocessors={utc:b.utc,unix:b.unix},this.changeLocale=function(d){var e=(b.locale||b.lang)(d);return a.isDefined(d)&&(c.$broadcast("amMoment:localeChanged"),c.$broadcast("amMoment:languageChange")),e},this.changeLanguage=function(a){return d.warn("angular-moment: Usage of amMoment.changeLanguage() is deprecated. Please use changeLocale()"),f.changeLocale(a)},this.preprocessDate=function(c,f,g){return a.isUndefined(f)&&(f=e.preprocess),this.preprocessors[f]?this.preprocessors[f](c,g):(f&&d.warn("angular-moment: Ignoring unsupported value for preprocess: "+f),!isNaN(parseFloat(c))&&isFinite(c)?b(parseInt(c,10)):b(c,g))},this.applyTimezone=function(a){var b=e.timezone;return a&&b&&(a.tz?a=a.tz(b):d.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),a}}]).filter("amCalendar",["moment","amMoment",function(a,b){return function(c,d){if("undefined"==typeof c||null===c)return"";c=b.preprocessDate(c,d);var e=a(c);return e.isValid()?b.applyTimezone(e).calendar():""}}]).filter("amDateFormat",["moment","amMoment",function(a,b){return function(c,d,e){if("undefined"==typeof c||null===c)return"";c=b.preprocessDate(c,e);var f=a(c);return f.isValid()?b.applyTimezone(f).format(d):""}}]).filter("amDurationFormat",["moment",function(a){return function(b,c,d){return"undefined"==typeof b||null===b?"":a.duration(b,c).humanize(d)}}]).filter("amTimeAgo",["moment","amMoment",function(a,b){return function(c,d,e){if("undefined"==typeof c||null===c)return"";c=b.preprocessDate(c,d);var f=a(c);return f.isValid()?b.applyTimezone(f).fromNow(e):""}}])}"function"==typeof define&&define.amd?define("angular-moment",["angular","moment"],a):"undefined"!=typeof module&&module&&module.exports?a(angular,require("moment")):a(angular,window.moment)}();;!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(b,c,d,e,f){function g(){d.cancel(i),f.complete(),k=0,j=0}function h(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var i,j=0,k=0,l=f.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||h(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===j&&(i=d(function(){f.start()},l)),j++,f.set(k/j)),a},response:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),k>=j?g():f.set(k/j)),a},responseError:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),k>=j?g():f.set(k/j)),b.reject(a)}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,u&&k.enter(o,e),t&&k.enter(q,e),f(v))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,c.cancel(l),l=c(function(){g()},250)}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.includeSpinner,u=this.includeBar,v=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();;!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c){try{Object.defineProperty(a,b,{get:c})}catch(d){}}var c=function(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var d=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};a("open",function(a){return function(b,c,e){d(this),this.__url=c;try{a.apply(this,[b,c,e])}catch(f){f.message.indexOf("Access is denied")>-1&&a.apply(this,[b,"_fix_for_ie_crossdomain__",e])}}}),a("getResponseHeader",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),a("getAllResponseHeaders",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),a("abort",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),a("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){d(this);var e=c(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=c,a.apply(this,arguments)}}),a("send",function(a){return function(){var d=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var e=arguments[0],f={url:d.__url,jsonp:!1,cache:!0,complete:function(a,c){d.__completed=!0,!a&&d.__listeners.load&&d.__listeners.load({type:"load",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),!a&&d.__listeners.loadend&&d.__listeners.loadend({type:"loadend",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),"abort"===a&&d.__listeners.abort&&d.__listeners.abort({type:"abort",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),void 0!==c.status&&b(d,"status",function(){return 0==c.status&&a&&"abort"!==a?500:c.status}),void 0!==c.statusText&&b(d,"statusText",function(){return c.statusText}),b(d,"readyState",function(){return 4}),void 0!==c.response&&b(d,"response",function(){return c.response});var e=c.responseText||(a&&0==c.status&&"abort"!==a?a:void 0);b(d,"responseText",function(){return e}),b(d,"response",function(){return e}),a&&b(d,"err",function(){return a}),d.__fileApiXHR=c,d.onreadystatechange&&d.onreadystatechange(),d.onload&&d.onload()},fileprogress:function(a){if(a.target=d,d.__listeners.progress&&d.__listeners.progress(a),d.__total=a.total,d.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){d.__completed||(d.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},1e4)}},headers:d.__requestHeaders};f.data={},f.files={};for(var g=0;g<e.data.length;g++){var h=e.data[g];null!=h.val&&null!=h.val.name&&null!=h.val.size&&null!=h.val.type?f.files[h.key]=h.val:f.data[h.key]=h.val}setTimeout(function(){if(!c())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';d.__fileApiXHR=FileAPI.upload(f)},1)}else a.apply(d,arguments)}}),window.XMLHttpRequest.__isFileAPIShim=!0;var e=function(a){if(!c())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var b=angular.element(a);if(!b.attr("disabled")&&!b.hasClass("js-fileapi-wrapper")&&(null!=b.attr("ng-file-select")||null!=b.attr("data-ng-file-select")||b.attr("ng-file-generated-elem")&&(null!=b.parent().attr("ng-file-select")||null!=b.parent().attr("data-ng-file-select"))))if(FileAPI.wrapInsideDiv){var d=document.createElement("div");d.innerHTML='<div class="js-fileapi-wrapper" style="position:relative; overflow:hidden"></div>',d=d.firstChild;var e=a.parentNode;e.insertBefore(d,a),e.removeChild(a),d.appendChild(a)}else b.addClass("js-fileapi-wrapper"),b.attr("ng-file-generated-elem")&&((""===b.parent().css("position")||"static"===b.parent().css("position"))&&b.parent().css("position","relative"),b.css("top",0).css("bottom",0).css("left",0).css("right",0).css("width","100%").css("height","100%").css("padding",0).css("margin",0),b.parent().unbind("click",b.parent().__afu_fileClickDelegate__))},f=function(a){return function(b){for(var c=FileAPI.getFiles(b),d=0;d<c.length;d++)void 0===c[d].size&&(c[d].size=0),void 0===c[d].name&&(c[d].name="file"),void 0===c[d].type&&(c[d].type="undefined");b.target||(b.target={}),b.target.files=c,b.target.files!=c&&(b.__files_=c),(b.__files_||b.target.files).item=function(a){return(b.__files_||b.target.files)[a]||null},a&&a.apply(this,[b])}},g=function(a,b){return("change"===b.toLowerCase()||"onchange"===b.toLowerCase())&&"file"==a.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=function(a){return function(b,c,d,h){g(this,b)?(e(this),a.apply(this,[b,f(c),d,h])):a.apply(this,[b,c,d,h])}}(HTMLInputElement.prototype.addEventListener)),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=function(a){return function(b,c){g(this,b)?(e(this),window.jQuery?angular.element(this).bind("change",f(null)):a.apply(this,[b,f(c)])):a.apply(this,[b,c])}}(HTMLInputElement.prototype.attachEvent)),window.FormData=FormData=function(){return{append:function(a,b,c){this.data.push({key:a,val:b,name:c})},data:[],__isFileAPIShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var a,b,d,e,f,g=document.createElement("script"),h=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)a=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)b=window.FileAPI.jsPath;else for(d=0;d<h.length;d++)if(f=h[d].src,e=f.search(/\/angular\-file\-upload[\-a-zA-z0-9\.]*\.js/),e>-1){b=f.substring(0,e+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=b),g.setAttribute("src",a||b+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(g),FileAPI.hasFlash=c()}}(),FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){if(b||(b=!0,a.onloadstart&&this.onloadstart(c("loadstart",d))),"load"===d.type){a.onloadend&&a.onloadend(c("loadend",d));var e=c("load",d);a.onload&&a.onload(e),a.dispatchEvent(e)}else if("progress"===d.type){var e=c("progress",d);a.onprogress&&a.onprogress(e),a.dispatchEvent(e)}else{var e=c("error",d);a.onerror&&a.onerror(e),a.dispatchEvent(e)}};this.readAsArrayBuffer=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsBinaryString=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}})}();;!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c,d,e,f){function g(a,b,c,d,e){f(function(){for(var b=[],g=0;g<a.length;g++)b.push(a.item(g));c&&(d.fileModel=b,c&&c.$setViewValue(null!=b&&0==b.length?"":b)),f(function(){d.change({$files:b,$event:e})})})}a.multiple()&&(b.attr("multiple","true"),c.multiple="true");var h=a.accept();if(h&&(b.attr("accept",h),c.accept=h),"input"!==b[0].tagName.toLowerCase()||"file"!==(b.attr("type")&&b.attr("type").toLowerCase())){var i=angular.element('<input type="file">');c.multiple&&i.attr("multiple",c.multiple),c.accept&&i.attr("accept",c.accept),i.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").attr("ng-file-generated-elem",!0),b.append(i),b.__afu_fileClickDelegate__=function(){i[0].click()},b.bind("click",b.__afu_fileClickDelegate__),b.css("overflow","hidden"),b=i}0!=a.resetOnClick()&&b.bind("click",function(e){b[0].value&&g([],c,d,a,e),b[0].value=null}),d&&a.$parent.$watch(c.ngModel,function(a){null==a&&(b[0].value=null)}),""!=c.ngFileSelect&&(a.change=a.select),b.bind("change",function(b){var e;e=b.__files_||b.target.files,g(e,c,d,a,b)})}function c(a,b,c,g,h,i,j){function k(a,b,c){var d=!0;if(r){var e=c.dataTransfer.items;if(null!=e)for(var f=0;f<e.length&&d;f++)d=d&&("file"==e[f].kind||""==e[f].kind)&&(null!=e[f].type.match(r)||null!=e[f].name&&null!=e[f].name.match(r))}var g=a.dragOverClass({$event:c});return g&&(g.delay&&(p=g.delay),g.accept&&(g=d?g.accept:g.reject)),g||b.dragOverClass||"dragover"}function l(a,b,c,d){function f(a){!r||a.type.match(r)||null!=a.name&&a.name.match(r)?h.push(a):k.push(a)}function g(a,b,c){if(null!=b)if(b.isDirectory){f({name:b.name,type:"directory",path:(c?c:"")+b.name});var d=b.createReader();s++,d.readEntries(function(d){try{for(var e=0;e<d.length;e++)g(a,d[e],(c?c:"")+b.name+"/")}finally{s--}})}else s++,b.file(function(a){s--,a.path=(c?c:"")+a.name,f(a)})}var h=[],k=[],l=a.dataTransfer.items;if(l&&l.length>0&&"file"!=j.protocol())for(var m=0;m<l.length;m++){if(l[m].webkitGetAsEntry&&l[m].webkitGetAsEntry()&&l[m].webkitGetAsEntry().isDirectory){var n=l[m].webkitGetAsEntry();if(n.isDirectory&&!c)continue;null!=n&&(e(n.name)?g(h,n):l[m].webkitGetAsEntry().isDirectory||f(l[m].getAsFile()))}else{var o=l[m].getAsFile();null!=o&&f(o)}if(!d&&h.length>0)break}else{var p=a.dataTransfer.files;if(null!=p)for(var m=0;m<p.length&&(f(p.item(m)),d||!(h.length>0));m++);}var q=0;!function t(a){i(function(){if(s)10*q++<2e4&&t(10);else{if(!d&&h.length>1){for(var a=0;"directory"==h[a].type;)a++;h=[h[a]]}b(h,k)}},a||0)}();var s=0}var m=d();if(c.dropAvailable&&i(function(){a.dropAvailable=m}),!m)return 0!=a.hideOnDropNotAvailable()&&b.css("display","none"),void 0;var n=null,o=a.stopPropagation(),p=1,q=a.accept()||c.accept||c.ngAccept,r=q?new RegExp(f(q)):null;b[0].addEventListener("dragover",function(d){d.preventDefault(),o&&d.stopPropagation(),i.cancel(n),a.actualDragOverClass||(a.actualDragOverClass=k(a,c,d)),b.addClass(a.actualDragOverClass)},!1),b[0].addEventListener("dragenter",function(a){a.preventDefault(),o&&a.stopPropagation()},!1),b[0].addEventListener("dragleave",function(){n=i(function(){b.removeClass(a.actualDragOverClass),a.actualDragOverClass=null},p||1)},!1),""!=c.ngFileDrop&&(a.change=a.drop),b[0].addEventListener("drop",function(d){d.preventDefault(),o&&d.stopPropagation(),b.removeClass(a.actualDragOverClass),a.actualDragOverClass=null,l(d,function(b,e){g&&(a.fileModel=b,g&&g.$setViewValue(null!=b&&0==b.length?"":b)),c.ngFileRejectedModel&&(a.fileRejectedModel=e),i(function(){a.change({$files:b,$rejectedFiles:e,$event:d})})},0!=a.allowDir(),c.multiple||a.multiple()||"true"==c.ngMultiple)},!1)}function d(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}function e(a){return/^[\000-\177]*$/.test(a)}function f(a){if(a.length>2&&"/"===a[0]&&"/"===a[a.length-1])return a.substring(1,a.length-1);var b=a.split(","),c="";if(b.length>1)for(var d=0;d<b.length;d++)c+="("+f(b[d])+")",d<b.length-1&&(c+="|");else c="^"+a.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",c=c.replace(/\\\*/g,".*").replace(/\\\?/g,".");return c}window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&a("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}});var g=angular.module("angularFileUpload",[]);g.version="2.0.5",g.service("$upload",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{},d.transformRequest=d.transformRequest||function(b,c){return window.ArrayBuffer&&b instanceof window.ArrayBuffer?b:a.defaults.transformRequest[0](b,c)};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progress_fn=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(b){b.headers=b.headers||{},b.headers["Content-Type"]=void 0,b.transformRequest=b.transformRequest||a.defaults.transformRequest;var c=new FormData,e=b.transformRequest,f=b.data;return b.transformRequest=function(a,c){if(f)if(b.formDataAppender)for(var d in f){var g=f[d];b.formDataAppender(a,d,g)}else for(var d in f){var g=f[d];if("function"==typeof e)g=e(g,c);else for(var h=0;h<e.length;h++){var i=e[h];"function"==typeof i&&(g=i(g,c))}void 0!=g&&a.append(d,g)}if(null!=b.file){var j=b.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(b.file))for(var k="[object String]"===Object.prototype.toString.call(j),h=0;h<b.file.length;h++)a.append(k?j:j[h],b.file[h],b.fileName&&b.fileName[h]||b.file[h].name);else a.append(j,b.file,b.fileName||b.file.name)}return a},b.data=c,d(b)},this.http=function(a){return d(a)}}]),g.directive("ngFileSelect",["$parse","$timeout",function(a,c){return{restrict:"AEC",require:"?ngModel",scope:{fileModel:"=ngModel",change:"&ngFileChange",select:"&ngFileSelect",resetOnClick:"&resetOnClick",multiple:"&ngMultiple",accept:"&ngAccept"},link:function(d,e,f,g){b(d,e,f,g,a,c)}}}]),g.directive("ngFileDrop",["$parse","$timeout","$location",function(a,b,d){return{restrict:"AEC",require:"?ngModel",scope:{fileModel:"=ngModel",fileRejectedModel:"=ngFileRejectedModel",change:"&ngFileChange",drop:"&ngFileDrop",allowDir:"&allowDir",dragOverClass:"&dragOverClass",dropAvailable:"=dropAvailable",stopPropagation:"&stopPropagation",hideOnDropNotAvailable:"&hideOnDropNotAvailable",multiple:"&ngMultiple",accept:"&ngAccept"},link:function(e,f,g,h){c(e,f,g,h,a,b,d)}}}]),g.directive("ngNoFileDrop",function(){return function(a,b){d()&&b.css("display","none")}}),g.directive("ngFileDropAvailable",["$parse","$timeout",function(a,b){return function(c,e,f){if(d()){var g=a(f.ngFileDropAvailable);b(function(){g(c)})}}}])}();;var commonAppModule=angular.module("commonAppModule",[]);;var trkbook=angular.module("trkbookApp",modules);trkbook.config(["$httpProvider",function($httpProvider){$httpProvider.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]);trkbook.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"});trkbook.constant("USER_ROLES",{all:"*",admin:"admin",agency:"agency",booker:"booker",partner:"parnter"});trkbook.directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){if(event.which===13){scope.$apply(function(){scope.$eval(attrs.ngEnter)});event.preventDefault()}})}});trkbook.directive("imageonload",function(){return{restrict:"A",link:function(scope,element,attrs){element.bind("load",function(){scope.$apply(attrs.imageonload)})}}});trkbook.directive("csDateToIso",function(){var linkFunction=function(scope,element,attrs,ngModelCtrl){ngModelCtrl.$parsers.push(function(datepickerValue){return moment(datepickerValue).format("YYYY-MM-DD")})};return{restrict:"A",require:"ngModel",link:linkFunction}});trkbook.directive("autotranslate",function($interpolate,$compile){return{compile:function(element,attrs){var html=element.html();html=html.replace(/\[\[(\w+)\]\]/g,function(_,text){return'<span translate="'+text+'"></span>'});element.html(html)}}});;trkbook.controller("TrkAppController",function($scope,$timeout,$window,$http,notify,AuthService,$controller,$rootScope){var baseUrl=$window.baseUrl;$scope.currentUser=null;$scope.loginError=false;$scope.signupError=false;$scope.successMsg=false;$scope.emailVerify={};$scope.logmessage={};$scope.totalnewmsg=0;$scope.verificationKey="";$scope.setCurrentUser=function(user){$scope.currentUser=user};$scope.$on("toast",function(event,args){$scope.toast(args)});$scope.initduplex=function(id,name,reinit){var options={id:id,name:name,reinit:reinit,viewOffers:true};$rootScope.$broadcast("initduplex",options)};$scope.toast=function(options){if(typeof options.duration=="undefined"){var duration=5e3}else{var duration=options.duration}notify.config({duration:duration});notify(options)};$scope.setLoginError=function(error){$scope.loginError=error;$timeout(function(){$scope.loginError=false},13e3)};$scope.setSignupError=function(error){$scope.signupError=error;$timeout(function(){$scope.signupError=false},13e3)};$scope.$on("messageSaved",function(event,message){if(message.length>0)$scope.successMsg="Your message has been saved. Please login or signup."});$scope.$on("totalnewmsg",function(event,totalnewmsg){$scope.totalnewmsg=totalnewmsg});$scope.resendKey=function(){AuthService.resendKey($scope.emailVerify).then(function(data){if(data.status){$scope.successMsg=data.message}else{$scope.setLoginError(data.error)}},function(error){})};$scope.getStars=function(rating){rating=(Math.round(rating*2)/2).toFixed(1);var title=rating>=4.5?"Excellent":rating>=3.5?"Very Good":rating>=2.5?"Average":rating>=1.5?"Poor":"Very poor";var ret='<div class="star-rating-holder"><div class="star-rating">';for(var i=1;i<=5;i++){var c="star-off-png";if(i<=rating)c="star-on-png";r=parseFloat(rating)+.5;if(i==r)c="star-half-png";ret+='<i data-alt="'+i+'" class="'+c+'" title="'+title+'"></i> '}ret+="</div></div>";return ret};$scope.$watch("verificationKey",function(){if($scope.verificationKey&&$scope.verificationKey.length==4){$scope.emailVerify.activkey=$scope.verificationKey;AuthService.verifyKey($scope.emailVerify).then(function(data){if(data.status){$scope.emailVerify={};$scope.successMsg=data.message}else{$scope.setLoginError(data.error)}},function(error){})}});$scope.agReviews=[];$scope.agReviewsLoading=false;$scope.agReviewsPage=0;$scope.loadAgencyReviews=function(id,reinit){if(reinit){$scope.agReviews=[];$scope.agReviewsPage=0}$("#reviews-slide").addClass("slide-in");$scope.agReviewsLoading=true;var data={id:id,page:$scope.agReviewsPage};var config={params:data,headers:{Accept:"application/json"}};$http.get(baseUrl+"/rating/ws/getagencyreivews",config).then(function(response){if(response.data&&response.data.agency){$scope.agency=response.data.agency}if($scope.agReviewsPage==0){$scope.agReviews=response.data}else{for(var i=0;i<response.data.reviews.length;i++){$scope.agReviews.reviews.push(response.data.reviews[i])}}$scope.agReviewsLoading=false;$scope.agReviewsPage++},function(response){})};$scope.getUserId=function(){if(typeof Storage!=="undefined"){var userId=localStorage.getItem("userID");if(userId==null){var userId=randomString(9);try{localStorage.setItem("userID",userId)}catch(e){}}return userId}else{}};function randomString(length){return Math.round(Math.pow(36,length+1)-Math.random()*Math.pow(36,length)).toString(36).slice(1)}$scope.email="";$scope.validateSubEmail=false;$scope.submitemail=function(){if($scope.validateSubEmail===true){$http.post(baseUrl+"/newsletter/ws/emailletter",{email:$scope.email}).success(function(data,status){$scope.email="";$scope.validateSubEmail=false;var toastOptions={message:data.message,classes:"alert alert-success"};$scope.toast(toastOptions)}).error(function(data){})}};$scope.validateEmail=function(){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;$scope.validateSubEmail=re.test($scope.email);if($scope.validateSubEmail===true){}};$scope.priceChanged=function(price){$scope.initialPrice=price};$scope.newpriceChanged=function(id,newprice){if(newprice!=$scope.initialPrice){$http.post(baseUrl+"/products/ws/pricechanged",{id:id},{ignoreLoadingBar:true}).success(function(data){}).error(function(data){})}};function merge(obj1,obj2){var result={};for(var i in obj1){if(i in obj2&&typeof obj1[i]==="object"&&i!==null){result[i]=merge(obj1[i],obj2[i])}else{result[i]=obj1[i]}}for(i in obj2){if(i in result){continue}result[i]=obj2[i]}return result}$scope.selectedShipDetails=null;$scope.selectedDeckDetails=null;$scope.deckCabinImages=[];$scope.shipDetails=[];$scope.shipDeckDetails=[];$scope.shipJSONDatas={shipKeyInfos:[],cabinLists:[],deckLists:[]};$scope.selectedIndex={deck:0,cabin:0,facility:0};$scope.$on("selectShip",function(event,args){$scope.selectShip(args)});$scope.toarray=function(data,delim){if(!!data){return data.split(delim)}return[]};$scope.jparse=function(data){if(!!data){return JSON.parse(data)}return{}};$scope.selectShip=function(id){openShipModal();$scope.selectedShipDetails=null;$scope.selectedDeckDetails=null;if(!!$scope.shipDetails[id]&&$scope.shipDetails[id]!==""){$scope.selectedShipDetails=$scope.shipDetails[id];$scope.selectedDeckDetails=$scope.shipDeckDetails[id];return}$http.post(baseUrl+"/ships/ws/getshipdetails",id,{ignoreLoadingBar:true}).success(function(data){$scope.shipDetails[id]=data.ship;$scope.shipDetails[id].key_info=JSON.parse($scope.shipDetails[id].key_info);$scope.shipDetails[id].highlights=JSON.parse($scope.shipDetails[id].highlights);$scope.shipDeckDetails[id]=data.decks;if($scope.shipDetails[data.ship.id]!==""){$scope.shipDetails[id].ship_images=data.ship_images;$scope.selectedShipDetails=$scope.shipDetails[id];$scope.selectedDeckDetails=$scope.shipDeckDetails[id]}else alert("Ship details missing. Please try again later.")}).error(function(data){alert("Something went wrong. Please try again later.")})};function openShipModal(){$("body").css({overflow:"hidden","padding-right":"13px"});$("#ship-modal").fadeIn(350,function(){$(".ships-fixed-block .ships-banner .information-holder").mCustomScrollbar({theme:"dark",scrollInertia:250})})}$(".close-fixed-block").click(function(){$(".ships-fixed-block .ships-block").scrollTop(0);$("body").css({overflow:"visible","padding-right":"0"});$("#ship-modal").fadeOut(150)});function BookingEdit(){$scope.editDetails=[];$scope.selected_booking_id=null;this.editIds=[];$scope.editModalId="";this.details={submitInAction:false,show_reject_reason_input:false,edit_id:null,booking_id:null,reject_reason:"",loading:false,includesArray:[],data:[]}}var bookingEdit=new BookingEdit;$scope.toggleBookingEditView=function(booking_id,edit_id){$scope.editBookingRequest(booking_id,edit_id,function(){$scope.acceptBookingEdit()});!stripePayment.injected?stripePayment.initStripeForm($scope.editModalId):void 0};$scope.editBookingRequest=function(booking_id,edit_id,callback){$scope.selected_booking_id=booking_id;$scope.editDetails[booking_id]=bookingEdit.details;$scope.editDetails[booking_id].booking_id=booking_id;$scope.editDetails[booking_id].edit_id=edit_id;$scope.editDetails[booking_id].loading=true;var url=baseUrl+"/booking/bookingedit/bookingeditrequestinfo/id/"+booking_id;$http.get(url).then(function(response){$scope.editDetails[booking_id].loading=false;$scope.editDetails[booking_id].data=response.data.e_details;$scope.editDetails[booking_id].paymentDetails=response.data.p_details;try{if(response.data.includes!="")$scope.editDetails[booking_id].includesArray=response.data.e_details.includes.split("\n");callback()}catch(exception){}})};$scope.acceptBookingEdit=function(){var req={id:$scope.editDetails[$scope.selected_booking_id].edit_id,booking_id:$scope.editDetails[$scope.selected_booking_id].booking_id,status:1,reject_reason:$scope.editDetails[$scope.selected_booking_id].reject_reason};!$scope.editDetails[$scope.selected_booking_id].submitInAction&&__checkPayment()&&confirm("Are you sure you wish to accept the booking updates?")&&editAction(req)};function __checkPayment(){if($scope.editDetails[$scope.selected_booking_id].paymentDetails.to_pay!=1){return true}else{__paymentModal("open")}return false}function __paymentModal(type){var payModal="custom-pay-amount";if(type=="open"){$scope.editDetails[$scope.selected_booking_id]["remainigAmountToBePaid"]=__calculateremainigAmountToBePaid();$scope.editModalId="b_edit_"+$scope.selected_booking_id;$("#"+payModal).modal("show");_initPaymentModal("b_edit_"+$scope.selected_booking_id)}if(type=="close"){$("#"+payModal).modal("hide")}}function __calculateremainigAmountToBePaid(){return $scope.editDetails[$scope.selected_booking_id].paymentDetails.n_remaining_amount}$scope.paymentEditedAmountSubmit=function(){bookingEditPaymentAction()};function _checkIfPaymentRequired(callback){callback(0)}$scope.rejectReq={booking_id:null,edit_id:null,reject_text:""};$scope.rejectBookingEdit=function(booking_id,edit_id){$scope.rejectReq={booking_id:booking_id,edit_id:edit_id,reject_text:""};$scope.editBookingRequest(booking_id,edit_id,function(){$("#bookingEditRejectModal").modal("show")})};$scope.confirmBookingUpdateRejection=function(){$scope.editDetails[$scope.selected_booking_id].reject_reason=$scope.rejectReq.reject_text;if($scope.editDetails[$scope.selected_booking_id].reject_reason.replace(/\s/g,"").length==0){alert("Please mention reason for rejection.");return}var req={id:$scope.editDetails[$scope.selected_booking_id].edit_id,booking_id:$scope.editDetails[$scope.selected_booking_id].booking_id,status:0,reject_reason:$scope.editDetails[$scope.selected_booking_id].reject_reason};!$scope.editDetails[$scope.selected_booking_id].submitInAction&&editAction(req)};function editAction(req){$scope.editDetails[$scope.selected_booking_id].submitInAction=true;var url=baseUrl+"/booking/bookingedit/update";$http.post(url,req).then(function(res){toastNRefresh(res.data.message,res.data.status);$scope.editDetails[$scope.selected_booking_id].submitInAction=false})}function toastNRefresh(toastMessage,status){var toastOptions={message:toastMessage,classes:status?"alert alert-success":"alert alert-warning"};$scope.toast(toastOptions);status&&setTimeout(function(){$window.location.reload()},2e3)}function bookingEditPaymentAction(){var id=$scope.editModalId;if(!checkCookie()){reportError("Cookies are disabled in your browser. Please enable cookies and re-login to proceed.");return false}$("#processing-bar"+id).addClass("process");$("#processing-bar"+id).css({opacity:"1",height:"30px"});$("#paymentEditBtn"+id).attr("disabled","disabled");stripePayment.listenFormSubmit(id)}function stripeTokenHandler(token,card){var bookingEdiId=$scope.editDetails[$scope.selected_booking_id]["edit_id"];__removeTokenView();var f=$("#payEditBookingAmountForm"+$scope.editModalId);f.append('<input id="bedit_striptoken"  type="hidden" name="stripeToken" value="'+token.id+'">');f.append('<input id="bedit_booking_id" type="hidden" name="bedit_id" value="'+bookingEdiId+'">');stripeSecureResponseHandler(card)}function stripeSecureResponseHandler(card){var datastring=$("#payEditBookingAmountForm"+$scope.editModalId).serialize();$.ajax({type:"POST",url:baseUrl+"/booking/bookingedit/payment?getClientSecret=true",data:datastring,dataType:"json",success:function(data){if(data.status==1){toastNRefresh(data.message,data.status);__paymentModal("close")}else{if(data.client_secret){stripe.handleCardPayment(data.client_secret,card).then(function(result){if(result.error){reportError(result.error.message);$.ajax({type:"POST",url:baseUrl+"/booking/confirmbooking/saveintentresponse",data:datastring+"&intent_response="+JSON.stringify(result),dataType:"json",success:function(data){},error:function(data){}})}else{$.ajax({type:"POST",url:baseUrl+"/booking/bookingedit/payment",data:datastring+"&intent_response="+JSON.stringify(result),dataType:"json",success:function(data){if(data.status==1){toastNRefresh(data.message,data.status);__paymentModal("close")}else{reportError(data.message)}},error:function(data){reportError(data.responseText)}})}})}else{reportError(data.message)}}},error:function(data){reportError(data.responseText)}});return false}function reportError(msg){$("#processing-bar"+$scope.editModalId).css({opacity:"0",height:"0","margin-bottom":"20px"});$(".err-block").remove();$("#payment-errors"+$scope.editModalId).append('<span class="err-block">'+msg+"</span>").addClass("error payment-error");$("#paymentEditBtn"+$scope.editModalId).prop("disabled",false);return false}function _initPaymentModal(id){$("#processing-bar"+id).css({opacity:"0",height:"0","margin-bottom":"20px"});$("#processing-bar"+id).removeClass("process");$(".err-block").remove();$("#paymentEditBtn"+id).prop("disabled",false);var inputsID=["card-number","card-expiry-date","name-on-card","cvc"];for(var key in inputsID){var kid=inputsID[key]+id;$("#"+kid).val("")}__removeTokenView()}function __removeTokenView(){$("#bedit_striptoken").remove();$("#bedit_booking_id").remove()}function StripePayment(){this.stripe=typeof stripe!="undefined"?stripe:null;this.elements=stripe.elements();this.card=null;this.cvc=null;this.exp=null;this.elementStyles={base:{color:"#2a3439",fontFamily:'"Roboto",Arial,Verdana,Helvetica,sans-serif',fontSize:"15px","::placeholder":{color:"#727475"},":-webkit-autofill":{color:"#2a3439"}},invalid:{color:"#d9534f","::placeholder":{color:"#FFCCA5"}}};this.injected=false}StripePayment.prototype.initStripeForm=function(id){this.injected=true;var self=this;this.card=this.elements.create("cardNumber",{placeholder:"Your 16 digit card number",style:this.elementStyles,value:""});this.card.mount("#card-number"+id);this.cvc=this.elements.create("cardCvc",{placeholder:"3 or digit security code on card",style:this.elementStyles,value:""});this.cvc.mount("#card-cvc"+id);this.exp=this.elements.create("cardExpiry",{placeholder:"MM/YY",style:this.elementStyles,value:""});this.exp.mount("#card-exp"+id,function(){});this.card.addEventListener("change",function(event){document.getElementById("paymentEditBtn"+$scope.editModalId)?document.getElementById("paymentEditBtn"+$scope.editModalId).disabled=false:void 0;document.getElementById("invoicepaymentsubmitBtn")?document.getElementById("invoicepaymentsubmitBtn").disabled=false:void 0})};StripePayment.prototype.listenFormSubmit=function(id){var self=this;var cardData={name:$("#name-on-card"+id).val()};stripe.createToken(self.card,cardData).then(function(result){if(result.error&&result.error.message){reportError(result.error.message)}else{stripeTokenHandler(result.token,self.card)}})};if(typeof stripe!="undefined"){var stripePayment=new StripePayment}});;!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(e){function s(){var s,r;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),void 0!==r?r:!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i,s;return t(this[0]).is("form")?e=this.validate().form():(s=[],e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e,s=s.concat(i.errorList)}),i.errorList=s),e},rules:function(e,i){var s,r,n,a,o,l,h=this[0];if(e)switch(s=t.data(h.form,"validator").settings,r=s.rules,n=t.validator.staticRules(h),e){case"add":t.extend(n,t.validator.normalizeRule(i)),delete n.messages,r[h.name]=n,i.messages&&(s.messages[h.name]=t.extend(s.messages[h.name],i.messages));break;case"remove":return i?(l={},t.each(i.split(/\s/),function(e,i){l[i]=n[i],delete n[i],"required"===i&&t(h).removeAttr("aria-required")}),l):(delete r[h.name],n)}return a=t.validator.normalizeRules(t.extend({},t.validator.classRules(h),t.validator.attributeRules(h),t.validator.dataRules(h),t.validator.staticRules(h)),h),a.required&&(o=a.required,delete a.required,a=t.extend({required:o},a),t(h).attr("aria-required","true")),a.remote&&(o=a.remote,delete a.remote,a=t.extend(a,{remote:o})),a}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,i){var s=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===i.which&&""===this.elementValue(e)||-1!==t.inArray(i.keyCode,s)||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this.form,"validator"),s="on"+e.type.replace(/^validate/,""),r=i.settings;r[s]&&!t(this).is(r.ignore)&&r[s].call(i,this,e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){s[i]=e})}),i=this.settings.rules,t.each(i,function(e,s){i[e]=t.validator.normalizeRule(s)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)if(void 0!=this.findByName(e[t].name).length&&this.findByName(e[t].name).length>1)for(var i=0;i<this.findByName(e[t].name).length;i++)this.check(this.findByName(e[t].name)[i]);else this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),s=this.validationTargetFor(i),r=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=t(s),r=this.check(s)!==!1,r?delete this.invalid[s.name]:this.invalid[s.name]=!0),t(e).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var e,i=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(e=0;i[e];e++)this.settings.unhighlight.call(this,i[e],this.settings.errorClass,"");else i.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,s=t(e),r=e.type;return"radio"===r||"checkbox"===r?this.findByName(e.name).filter(":checked").val():"number"===r&&"undefined"!=typeof e.validity?e.validity.badInput?!1:s.val():(i=s.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s,r,n=t(e).rules(),a=t.map(n,function(t,e){return e}).length,o=!1,l=this.elementValue(e);for(s in n){r={method:s,parameters:n[s]};try{if(i=t.validator.methods[s].call(this,l,e,r.parameters),"dependency-mismatch"===i&&1===a){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,r),!1}catch(h){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",h),h instanceof TypeError&&(h.message+=".  Exception occurred when checking element "+e.id+", check the '"+r.method+"' method."),h}}if(!o)return this.objectLength(n)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e,method:i.method}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s,r,n,a=this.errorsFor(e),o=this.idOrName(e),l=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(a=t("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),s=a,this.settings.wrapper&&(s=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e),a.is("label")?a.attr("for",o):0===a.parents("label[for='"+o+"']").length&&(n=a.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),l?l.match(new RegExp("\\b"+n+"\\b"))||(l+=" "+n):l=n,t(e).attr("aria-describedby",l),r=this.groups[e.name],r&&t.each(this.groups,function(e,i){i===r&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var i=this.idOrName(e),s=t(e).attr("aria-describedby"),r="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(r=r+", #"+s.replace(/\s+/g,", #")),this.errors().filter(r)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(t,e,i,s){/min|max/.test(i)&&(null===e||/number|range|text/.test(e))&&(s=Number(s),isNaN(s)&&(s=void 0)),s||0===s?t[i]=s:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(e){var i,s,r={},n=t(e),a=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(s=e.getAttribute(i),""===s&&(s=!0),s=!!s):s=n.attr(i),this.normalizeAttributeRule(r,a,i,s);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var i,s,r={},n=t(e),a=e.getAttribute("type");for(i in t.validator.methods)s=n.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(r,a,i,s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return void delete e[s];if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0!==r.param?r.param:!0:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,s,r=0,n=0,a=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)s=t.charAt(i),n=parseInt(s,10),a&&(n*=2)>9&&(n-=9),r+=n,a=!a;return r%10===0},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=s[0]&&r<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.off(".validate-equalTo").on("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r,n,a=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,s="string"==typeof s&&{url:s}||s,a.old===e?a.valid:(a.old=e,r=this,this.startRequest(i),n={},n[i.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:n,context:r.currentForm,success:function(s){var n,o,l,h=s===!0||"true"===s;r.settings.messages[i.name].remote=a.originalMessage,h?(l=r.formSubmitted,r.prepareElement(i),r.formSubmitted=l,r.successList.push(i),delete r.invalid[i.name],r.showErrors()):(n={},o=s||r.defaultMessage(i,"remote"),n[i.name]=a.message=t.isFunction(o)?o(e):o,r.invalid[i.name]=!0,r.showErrors(n)),a.valid=h,r.stopRequest(i,h)}},s)),"pending")}}});var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,s){var r=t.port;"abort"===t.mode&&(i[r]&&i[r].abort(),i[r]=s)}):(e=t.ajax,t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(i[n]&&i[n].abort(),i[n]=e.apply(this,arguments),i[n]):e.apply(this,arguments)})});;angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(a,b,c,d,e){var f=10,g=15,h=1e4,i="angular-notify.html",j="center",k=document.body,l=[],m=function(m){"object"!=typeof m&&(m={message:m}),m.templateUrl=m.templateUrl?m.templateUrl:i,m.position=m.position?m.position:j,m.container=m.container?m.container:k,m.classes=m.classes?m.classes:"";var n=m.scope?m.scope.$new():e.$new();n.$message=m.message,n.$classes=m.classes,n.$messageTemplate=m.messageTemplate,b.get(m.templateUrl,{cache:d}).success(function(b){var d=c(b)(n);if(d.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(a){("opacity"===a.propertyName||0===a.currentTarget.style.opacity||a.originalEvent&&"opacity"===a.originalEvent.propertyName)&&(d.remove(),l.splice(l.indexOf(d),1),j())}),m.messageTemplate){for(var e,i=0;i<d.children().length;i++)if(angular.element(d.children()[i]).hasClass("cg-notify-message-template")){e=angular.element(d.children()[i]);break}if(!e)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+m.templateUrl+".");e.append(c(m.messageTemplate)(n))}angular.element(m.container).append(d),l.push(d),"center"===m.position&&a(function(){d.css("margin-left","-"+d[0].offsetWidth/2+"px")}),n.$close=function(){d.css("opacity",0).attr("data-closing","true"),j()};var j=function(){for(var a=0,b=f,c=l.length-1;c>=0;c--){var d=10,e=l[c],h=e[0].offsetHeight,i=b+h+d;e.attr("data-closing")?i+=20:b+=h+g,e.css("top",i+"px").css("margin-top","-"+(h+d)+"px").css("visibility","visible"),a++}};a(function(){j()}),h>0&&a(function(){n.$close()},h)}).error(function(a){throw new Error("Template specified for cgNotify ("+m.templateUrl+") could not be loaded. "+a)});var o={};return o.close=function(){n.$close&&n.$close()},Object.defineProperty(o,"message",{get:function(){return n.$message},set:function(a){n.$message=a}}),o};return m.config=function(a){f=angular.isUndefined(a.startTop)?f:a.startTop,g=angular.isUndefined(a.verticalSpacing)?g:a.verticalSpacing,h=angular.isUndefined(a.duration)?h:a.duration,i=a.templateUrl?a.templateUrl:i,j=angular.isUndefined(a.position)?j:a.position,k=a.container?a.container:k},m.closeAll=function(){for(var a=l.length-1;a>=0;a--){var b=l[a];b.css("opacity",0)}},m}]),angular.module("cgNotify").run(["$templateCache",function(a){"use strict";a.put("angular-notify.html",'<div class="cg-notify-message" ng-class="$classes">\n\n    <div ng-show="!$messageTemplate">\n        {{$message}}\n    </div>\n\n    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}]);;$("#unlock-signup-check").prop("checked",true);var dgetUrl=window.location;var discountbaseUrl=baseUrl;$("#unlock-signup-check").change(function(){if(!$(this).is(":checked")){$(':input[type="submit"]').prop("disabled",true)}else{$(':input[type="submit"]').prop("disabled",false)}});$("#unlockDiscountForm").submit(function(event){event.preventDefault();var acceptCondtion=$("#unlock-signup-check").is(":checked");var elements=this.elements;var values={full_name:null,email:null};for(var key in elements){if(typeof values[elements[key]["name"]]!="undefined"){values[elements[key]["name"]]=elements[key]["value"]}}if(acceptCondtion&&countText(values.full_name)>0&&countText(values.email)>0&&validateEmail(values.email)){submitForm(values)}});function countText(txt){return txt.replace(/\s/g,"").length}function validateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase())}function submitForm(values){if(!!$(".unlock-close")){$(".unlock-close")[0].style.display="none"}$.post(discountbaseUrl+"/ws/unlockdiscount",values).done(function(data){var response=JSON.parse(data);if(response.s){displayAnotherForm()}})}function displayAnotherForm(){var lockPreview=$(".locked-preview")[0];var unlockPreview=$(".unlocked-preview")[0];lockPreview.style.display="none";unlockPreview.style.display="block"}$("#see-lower").click(function(){location.reload()});